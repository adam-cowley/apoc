
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta charset="utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
      <meta class="swiftype" name="neo4j-site" data-type="enum" content="Reference Docs"></meta>
      <meta class="swiftype" name="main-search-priority" data-type="integer" content="3"></meta>
      <title>6.2.&nbsp;Export to JSON - Chapter&nbsp;6.&nbsp;Export</title>
      <link rel="stylesheet" type="text/css" href="../../docbook.css"></link>
      <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,300italic"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/codemirror.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/theme/neo.min.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/chunked-base.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/extra.css"></link><script src="//code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script><script src="//cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js" type="text/javascript"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/codemirror.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/addon/runmode/runmode.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/mode/cypher/cypher.min.js" type="text/javascript"></script><script src="../../javascript/datatable.js" type="text/javascript"></script><script src="../../javascript/colorize.js" type="text/javascript"></script><script src="../../javascript/tabs-for-chunked.js" type="text/javascript"></script><script src="../../javascript/mp-nav.js" type="text/javascript"></script><script src="../../javascript/versionswitcher.js" type="text/javascript"></script><script src="../../javascript/version.js" type="text/javascript"></script><script src="../../javascript/feedback.js" type="text/javascript"></script><script src="//s3-eu-west-1.amazonaws.com/alpha.neohq.net/docs/new-manual/assets/search.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"></meta>
      <meta name="description" content="This section describes procedures that can be used to export data in JSON format."></meta>
      <link rel="prev" href="../csv/" title="6.1.&nbsp;Export to CSV"></link>
      <link rel="next" href="../gephi/" title="6.5.&nbsp;Export to Gephi"></link>
      <link rel="shortcut icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico"></link><script>var frontpage_relpath = "../../";
        $(document).ready(function() {
          CodeMirror.colorize();
          tabTheSource($('body'));
          var $header = $('header').first();
          $header.prepend(
            $('<a href="https://neo4j.com/docs/labs/" id="logo"><img src="https://s3.amazonaws.com/dev.assets.neo4j.com/wp-content/uploads/20190802073913/labs-logo6.png" alt="Neo4j Labs Logo"/></a>')
          );
          var sidebar = $('<div id="sidebar-wrapper"/>');
          $.get('toc.html', function (d){
            $(d).appendTo(sidebar);
            highlightToc();
            highlightLibraryHeader();
          });
          sidebar.insertAfter($('header').first());
          
        });

        </script></head>
   <body>
      <header>
         <div class="searchbox">
            <form id="search-form" class="search" name="search-form" role="search"><input id="search-form-input" name="q" title="search" type="search" lang="en" placeholder="Search Neo4j docs..." aria-label="Search Neo4j documentation" max-length="128" required="required"></input><input id="search-form-button" type="submit" value="Search"></input></form>
         </div>
         <ul class="documentation-library">
            <li><a href="https://neo4j.com/docs/labs/apoc/4.0/">APOC</a></li>
            <li><a href="https://neo4j.com/docs/labs/neo4j-streams/current/">Neo4j Streams</a></li>
            <li><a href="https://neo4j.com/docs/labs/nsmntx/current/">Neo Semantics</a></li>
            <li><a href="https://neo4j.com/docs/graph-algorithms/current/">Graph Algorithms</a></li>
            <li><a href="https://neo4j.com/docs/developer-manual/current/">Developer Manual</a></li>
         </ul>
         <nav id="header-nav"><span class="nav-previous"><a accesskey="p" href="../csv/"><span class="fa fa-long-arrow-left" aria-hidden="true"></span>Export to CSV</a></span><span class="nav-current">
               <p class="nav-title hidden">6.2.&nbsp;Export to JSON</p></span><span class="nav-next"><a accesskey="n" href="../gephi/">Export to Gephi<span class="fa fa-long-arrow-right" aria-hidden="true"></span></a></span></nav>
      </header>
      <div id="search-results" class="hidden"></div>
      <section class="section" id="export-json">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a class="anchor" href="#export-json"></a>6.2.&nbsp;Export to JSON
                  </h2>
               </div>
            </div>
         </div>
         <div class="abstract">
            <p>This section describes procedures that can be used to export data in JSON format.</p>
         </div>
         <p>The export JSON procedures export data into a format that&#8217;s supported by JavaScript based visualisation tools.
            We may also want to export data into JSON format for importing into other tools or for general sharing of query results.
            The procedures described in this section support exporting to a file or as a stream.
         </p>
         <p>This section includes:</p>
         <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
               <li class="listitem"><a class="link" href="#export-json-available-procedures" title="6.2.1.&nbsp;Available Procedures">Available Procedures</a></li>
               <li class="listitem"><a class="link" href="#export-json-file-export" title="6.2.2.&nbsp;Exporting to a file">Exporting to a file</a></li>
               <li class="listitem"><a class="link" href="#export-json-stream-export" title="6.2.3.&nbsp;Exporting a stream">Exporting a stream</a></li>
               <li class="listitem">
                  <p class="simpara"><a class="link" href="#export-json-examples" title="6.2.4.&nbsp;Examples">Examples</a></p>
                  <div class="itemizedlist">
                     <ul class="itemizedlist" style="list-style-type: circle; ">
                        <li class="listitem"><a class="link" href="#export-database-json" title="6.2.4.1.&nbsp;Export whole database to JSON">Export whole database</a></li>
                        <li class="listitem"><a class="link" href="#export-nodes-relationships-json" title="6.2.4.2.&nbsp;Export specified nodes and relationships to JSON">Export specified nodes and relationships</a></li>
                        <li class="listitem"><a class="link" href="#export-graph-json" title="6.2.4.3.&nbsp;Export virtual graph to JSON">Export virtual graph</a></li>
                        <li class="listitem"><a class="link" href="#export-cypher-query-json" title="6.2.4.4.&nbsp;Export results of Cypher query to JSON">Export results of Cypher query</a></li>
                     </ul>
                  </div>
               </li>
            </ul>
         </div>
         <section class="section" id="export-json-available-procedures">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#export-json-available-procedures"></a>6.2.1.&nbsp;Available Procedures
                     </h3>
                  </div>
               </div>
            </div>
            <p>The table below describes the available procedures:</p>
            <div class="informaltable">
               <div class="table" id="d0e13175">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">type</th>
                           <th style="text-align: left; vertical-align: top; ">qualified name</th>
                           <th style="text-align: left; vertical-align: top; ">signature</th>
                           <th style="text-align: left; vertical-align: top; ">description</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>procedure</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.all</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.all(file :: STRING?, config = {} :: MAP?) :: (file :: STRING?, source :: STRING?, format :: STRING?, nodes
                                    :: INTEGER?, relationships :: INTEGER?, properties :: INTEGER?, time :: INTEGER?, rows :: INTEGER?, batchSize :: INTEGER?,
                                    batches :: INTEGER?, done :: BOOLEAN?, data :: STRING?)</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>apoc.export.json.all(file,config) - exports whole database as json to the provided file</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>procedure</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.data</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.data(nodes :: LIST? OF NODE?, rels :: LIST? OF RELATIONSHIP?, file :: STRING?, config = {} :: MAP?) :: (file
                                    :: STRING?, source :: STRING?, format :: STRING?, nodes :: INTEGER?, relationships :: INTEGER?, properties :: INTEGER?, time
                                    :: INTEGER?, rows :: INTEGER?, batchSize :: INTEGER?, batches :: INTEGER?, done :: BOOLEAN?, data :: STRING?)</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>apoc.export.json.data(nodes,rels,file,config) - exports given nodes and relationships as json to the provided file</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>procedure</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.graph</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.graph(graph :: MAP?, file :: STRING?, config = {} :: MAP?) :: (file :: STRING?, source :: STRING?, format
                                    :: STRING?, nodes :: INTEGER?, relationships :: INTEGER?, properties :: INTEGER?, time :: INTEGER?, rows :: INTEGER?, batchSize
                                    :: INTEGER?, batches :: INTEGER?, done :: BOOLEAN?, data :: STRING?)</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>apoc.export.json.graph(graph,file,config) - exports given graph object as json to the provided file</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>procedure</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.query</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.export.json.query(query :: STRING?, file :: STRING?, config = {} :: MAP?) :: (file :: STRING?, source :: STRING?, format
                                    :: STRING?, nodes :: INTEGER?, relationships :: INTEGER?, properties :: INTEGER?, time :: INTEGER?, rows :: INTEGER?, batchSize
                                    :: INTEGER?, batches :: INTEGER?, done :: BOOLEAN?, data :: STRING?)</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>apoc.export.json.query(query,file,{config,&#8230;&#8203;,params:{params}}) - exports results from the cypher statement as json to the
                                 provided file
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <div class="table" id="d0e13252">
               <table class="table" summary="Config" border="1">
                  <caption class="table-title">Table&nbsp;6.11.&nbsp;Config</caption>
                  <colgroup>
                     <col class="col_1"></col>
                     <col class="col_2"></col>
                     <col class="col_3"></col>
                     <col class="col_4"></col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th style="text-align: left; vertical-align: top; ">name</th>
                        <th style="text-align: left; vertical-align: top; ">type</th>
                        <th style="text-align: left; vertical-align: top; ">default</th>
                        <th style="text-align: left; vertical-align: top; ">description</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>writeNodeProperties</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>boolean</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>false</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>if true export properties too.</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>stream</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>boolean</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>false</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>stream the json directly to the client into the <code class="literal">data</code> field
                           </p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <div class="admonitionblock note">
               <table>
                  <tbody>
                     <tr>
                        <td class="icon"><i class="fa icon-note" title="note"></i></td>
                        <td class="content">
                           <p>The labels exported are ordered alphabetically.
                              The output of <code class="literal">labels()</code> function is not sorted, use it in combination with <code class="literal">apoc.coll.sort()</code>.
                           </p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </section>
         <section class="section" id="export-json-file-export">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#export-json-file-export"></a>6.2.2.&nbsp;Exporting to a file
                     </h3>
                  </div>
               </div>
            </div>
            <p>By default exporting to the file system is disabled.
               We can enable it by setting the following property in <code class="literal">apoc.conf</code>:
            </p>
            <p><span class="formalpara-title">apoc.conf.&nbsp;</span>
               
            </p><pre class="programlisting highlight"><code data-lang="properties">apoc.export.file.enabled=true</code></pre><p>
               
            </p>
            <p>If we try to use any of the export procedures without having first set this property, we&#8217;ll get the following error message:</p>
            <div class="informaltable">
               <div class="table" id="d0e13327">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                     </colgroup>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Failed to invoke procedure: Caused by: java.lang.RuntimeException: Export to files not enabled, please set apoc.export.file.enabled=true
                                 in your neo4j.conf
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <p>Export files are written to the <code class="literal">import</code> directory, which is defined by the <code class="literal">dbms.directories.import</code> property.
               This means that any file path that we provide is relative to this directory.
               If we try to write to an absolute path, such as <code class="literal">/tmp/filename</code>, we&#8217;ll get an error message similar to the following one:
            </p>
            <div class="informaltable">
               <div class="table" id="d0e13346">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                     </colgroup>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Failed to invoke procedure: Caused by: java.io.FileNotFoundException: /path/to/neo4j/import/tmp/fileName (No such file or
                                 directory)
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <p>We can enable writing to anywhere on the file system by setting the following property in <code class="literal">apoc.conf</code>:
            </p>
            <p><span class="formalpara-title">apoc.conf.&nbsp;</span>
               
            </p><pre class="programlisting highlight"><code data-lang="properties">apoc.import.file.use_neo4j_config=false</code></pre><p>
               
            </p>
            <div class="admonitionblock warning">
               <table>
                  <tbody>
                     <tr>
                        <td class="icon"><i class="fa icon-warning" title="warning"></i></td>
                        <td class="content">
                           <p>Neo4j will now be able to write anywhere on the file system, so be sure that this is your intention before setting this property.</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </section>
         <section class="section" id="export-json-stream-export">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#export-json-stream-export"></a>6.2.3.&nbsp;Exporting a stream
                     </h3>
                  </div>
               </div>
            </div>
            <p>If we don&#8217;t want to export to a file, we can stream results back in the <code class="literal">data</code> column instead by passing a file name of <code class="literal">null</code> and providing the <code class="literal">stream:true</code> config.
            </p>
         </section>
         <section class="section" id="export-json-examples">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#export-json-examples"></a>6.2.4.&nbsp;Examples
                     </h3>
                  </div>
               </div>
            </div>
            <p>This section includes examples showing how to use the export to JSON procedures.
               These examples are based on a people dataset, which can be imported by running the following Cypher query:
            </p><pre class="programlisting highlight"><code data-lang="cypher">CREATE (a:User {
    name:'Adam', age:42, male:true, kids:['Sam','Anna','Grace'],
    born:localdatetime('2015185T19:32:24'),
    place:point({latitude: 13.1, longitude: 33.46789})
})
CREATE (b:User {name:'Jim', age:42})
CREATE (c:User {age:12})

CREATE (a)-[:KNOWS {since: 1993}]-&gt;(b)</code></pre><p>The Neo4j Browser visualization below shows the imported graph:</p>
            <div class="informalfigure">
               <div class="mediaobject"><img src="../../images/export-json.png" alt="export json"></img></div>
            </div>
            <section class="section" id="export-database-json">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#export-database-json"></a>6.2.4.1.&nbsp;Export whole database to JSON
                        </h4>
                     </div>
                  </div>
               </div>
               <p>The <code class="literal">apoc.export.json.all</code> procedure exports the whole database to a JSON file or as a stream.
               </p>
               <p><span class="formalpara-title">The following query exports the whole database to the file <code class="literal">all.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.all("all.json",{useTypes:true})</code></pre><p>
                  
               </p>
               <div class="table" id="d0e13418">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.12.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"all.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"database: nodes(3), rels(1)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>10</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>7</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">all.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">all.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"type":"node","id":"0","labels":["User"],"properties":{"born":"2015-07-04T19:32:24","name":"Adam","place":{"crs":"wgs-84","latitude":33.46789,"longitude":13.1,"height":null},"age":42,"male":true,"kids":["Sam","Anna","Grace"]}}
{"type":"node","id":"1","labels":["User"],"properties":{"name":"Jim","age":42}}
{"type":"node","id":"2","labels":["User"],"properties":{"age":12}}
{"id":"0","type":"relationship","label":"KNOWS","properties":{"since":1993,"bffSince":"P5M1DT12H"},"start":{"id":"0","labels":["User"]},"end":{"id":"1","labels":["User"]}}</code></pre><p>
                  
               </p>
               <p><span class="formalpara-title">The following query returns a stream of the whole database in the <code class="literal">data</code> column.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.all(null,{useTypes:true, stream: true})
YIELD file, nodes, relationships, properties, data
RETURN file, nodes, relationships, properties, data</code></pre><p>
                  
               </p>
               <div class="table" id="d0e13522">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.13.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>10</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"{\"type\":\"node\",\"id\":\"0\",\"labels\":[\"User\"],\"properties\":{\"born\":\"2015-07-04T19:32:24\",\"name\":\"Adam\",\"place\":{\"crs\":\"wgs-84\",\"latitude\":33.46789,\"longitude\":13.1,\"height\":null},\"age\":42,\"male\":true,\"kids\":[\"Sam\",\"Anna\",\"Grace\"]}}
                                 {\"type\":\"node\",\"id\":\"1\",\"labels\":[\"User\"],\"properties\":{\"name\":\"Jim\",\"age\":42}}
                                 {\"type\":\"node\",\"id\":\"2\",\"labels\":[\"User\"],\"properties\":{\"age\":12}}
                                 {\"id\":\"50000\",\"type\":\"relationship\",\"label\":\"KNOWS\",\"properties\":{\"since\":1993},\"start\":{\"id\":\"0\",\"labels\":[\"User\"]},\"end\":{\"id\":\"1\",\"labels\":[\"User\"]}}"
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </section>
            <section class="section" id="export-nodes-relationships-json">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#export-nodes-relationships-json"></a>6.2.4.2.&nbsp;Export specified nodes and relationships to JSON
                        </h4>
                     </div>
                  </div>
               </div>
               <p>The <code class="literal">apoc.export.json.data</code> procedure exports the specified nodes and relationships to a JSON file or as a stream.
               </p>
               <p><span class="formalpara-title">The following query exports all <code class="literal">KNOWS</code> relationships and <code class="literal">User</code> nodes to the file <code class="literal">knows.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (nod:User)
MATCH ()-[rels:KNOWS]-&gt;()
WITH collect(nod) as a, collect(rels) as b
CALL apoc.export.json.data(a, b, "knows.json", null)
YIELD file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data
RETURN file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data</code></pre><p>
                  
               </p>
               <div class="table" id="d0e13584">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.14.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"knows.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"data: nodes(3), rels(3)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>10</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">knows.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">knows.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"type":"node","id":"0","labels":["User"],"properties":{"born":"2015-07-04T19:32:24","name":"Adam","place":{"crs":"wgs-84","latitude":33.46789,"longitude":13.1,"height":null},"age":42,"male":true,"kids":["Sam","Anna","Grace"]}}
{"type":"node","id":"1","labels":["User"],"properties":{"name":"Jim","age":42}}
{"type":"node","id":"2","labels":["User"],"properties":{"age":12}}
{"id":"0","type":"relationship","label":"KNOWS","properties":{"bffSince":"P5M1DT12H","since":1993},"start":{"id":"0","labels":["User"]},"end":{"id":"1","labels":["User"]}}</code></pre><p>
                  
               </p>
               <p><span class="formalpara-title">The following query return a stream of all <code class="literal">KNOWS</code> relationships and <code class="literal">User</code> nodes in the <code class="literal">data</code> column.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (nod:User)
MATCH ()-[rels:KNOWS]-&gt;()
WITH collect(nod) as a, collect(rels) as b
CALL apoc.export.json.data(a, b, null, {stream: true})
YIELD file, nodes, relationships, properties, data
RETURN file, nodes, relationships, properties, data</code></pre><p>
                  
               </p>
               <div class="table" id="d0e13694">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.15.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>10</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"{\"type\":\"node\",\"id\":\"0\",\"labels\":[\"User\"],\"properties\":{\"born\":\"2015-07-04T19:32:24\",\"name\":\"Adam\",\"place\":{\"crs\":\"wgs-84\",\"latitude\":33.46789,\"longitude\":13.1,\"height\":null},\"age\":42,\"male\":true,\"kids\":[\"Sam\",\"Anna\",\"Grace\"]}}
                                 {\"type\":\"node\",\"id\":\"1\",\"labels\":[\"User\"],\"properties\":{\"name\":\"Jim\",\"age\":42}}
                                 {\"type\":\"node\",\"id\":\"2\",\"labels\":[\"User\"],\"properties\":{\"age\":12}}
                                 {\"id\":\"50000\",\"type\":\"rel
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </section>
            <section class="section" id="export-graph-json">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#export-graph-json"></a>6.2.4.3.&nbsp;Export virtual graph to JSON
                        </h4>
                     </div>
                  </div>
               </div>
               <p>The <code class="literal">apoc.export.json.graph</code> procedure exports a <a class="link" href="../../virtual/virtual-graph/" title="15.3.&nbsp;Virtual Graph">virtual graph</a> to a CSV file or as a stream.
               </p>
               <p>The examples in this section are based on a virtual graph of the whole database.
                  The query below creates a virtual graph and stores it in memory with the name <code class="literal">db.cached</code> using <a class="link" href="../../misc/static-values/" title="20.3.&nbsp;Static Value Storage">Static Value Storage</a>.
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.graph.fromDB('test',{})
YIELD graph AS g
CALL apoc.static.set("db.cached", g)
YIELD value
RETURN value, g</code></pre><div class="table" id="d0e13753">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.16.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">value</th>
                           <th style="text-align: left; vertical-align: top; ">g</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>{name: "test", relationships: [[:KNOWS {since: 1993}]], nodes: [(:User {born: 2015-07-04T19:32:24, name: "Adam", place: point({srid:4326,
                                 x:33.46789, y:13.1}), age: 42, male: TRUE, kids: ["Sam", "Anna", "Grace"]}), (:User {name: "Jim", age: 42}), (:User {age:
                                 12})], properties: {}}
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p><span class="formalpara-title">The following query exports the virtual graph from static value storage to the file <code class="literal">graph.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.graph(apoc.static.get("db.cached"),"graph.json",{})
YIELD file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data
RETURN file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data</code></pre><p>
                  
               </p>
               <div class="table" id="d0e13783">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.17.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"graph.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"graph: nodes(3), rels(1)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>10</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">graph.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">graph.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"type":"node","id":"0","labels":["User"],"properties":{"born":"2015-07-04T19:32:24","name":"Adam","place":{"crs":"wgs-84","latitude":33.46789,"longitude":13.1,"height":null},"age":42,"male":true,"kids":["Sam","Anna","Grace"]}}
{"type":"node","id":"1","labels":["User"],"properties":{"name":"Jim","age":42}}
{"type":"node","id":"2","labels":["User"],"properties":{"age":12}}
{"id":"0","type":"relationship","label":"KNOWS","properties":{"bffSince":"P5M1DT12H","since":1993},"start":{"id":"0","labels":["User"]},"end":{"id":"1","labels":["User"]}}</code></pre><p>
                  
               </p>
               <p><span class="formalpara-title">The following query returns a streams of the virtual graph from static value storage to the <code class="literal">data</code> column.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.graph(apoc.static.get("knows.cached"), null, {stream: true})
YIELD file, nodes, relationships, properties, data
RETURN file, nodes, relationships, properties, data</code></pre><p>
                  
               </p>
               <div class="table" id="d0e13887">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.18.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>9</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"{\"type\":\"node\",\"id\":\"0\",\"labels\":[\"User\"],\"properties\":{\"born\":\"2015-07-04T19:32:24\",\"name\":\"Adam\",\"place\":{\"crs\":\"wgs-84\",\"latitude\":33.46789,\"longitude\":13.1,\"height\":null},\"age\":42,\"male\":true,\"kids\":[\"Sam\",\"Anna\",\"Grace\"]}}
                                 {\"type\":\"node\",\"id\":\"1\",\"labels\":[\"User\"],\"properties\":{\"name\":\"Jim\",\"age\":42}}
                                 {\"id\":\"50000\",\"type\":\"relationship\",\"label\":\"KNOWS\",\"properties\":{\"since\":1993},\"start\":{\"id\":\"0\",\"labels\":[\"User\"]},\"end\":{\"id\":\"1\",\"labels\":[\"User\"]}}"
                                 "
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </section>
            <section class="section" id="export-cypher-query-json">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#export-cypher-query-json"></a>6.2.4.4.&nbsp;Export results of Cypher query to JSON
                        </h4>
                     </div>
                  </div>
               </div>
               <p>The <code class="literal">apoc.export.json.query</code> procedure exports the results of a Cypher query to a JSON file or as a stream.
               </p>
               <p><span class="formalpara-title">The following query exports all <code class="literal">User</code> nodes with an <code class="literal">age</code> property greater than <code class="literal">10</code> to the file <code class="literal">users-age.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.query(
    "MATCH (u:User) WHERE u.age &gt; $age return u",
    "users-age.json",
    {params:{age:15}}
)</code></pre><p>
                  
               </p>
               <div class="table" id="d0e13952">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.19.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"users-age.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"statement: cols(1)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>8</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">users-age.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">users-age.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"u":{"type":"node","id":"0","labels":["User"],"properties":{"born":"2015-07-04T19:32:24","name":"Adam","place":{"crs":"wgs-84","latitude":33.46789,"longitude":13.1,"height":null},"age":42,"male":true,"kids":["Sam","Anna","Grace"]}}}
{"u":{"type":"node","id":"1","labels":["User"],"properties":{"name":"Jim","age":42}}}
{"u":{"type":"node","id":"2","labels":["User"],"properties":{"age":12}}}</code></pre><p>
                  
               </p>
               <p><span class="formalpara-title">The following query returns a stream of <code class="literal">User</code> nodes with an <code class="literal">age</code> property greater than <code class="literal">10</code> to the <code class="literal">data</code> column.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.query(
    "MATCH (u:User) WHERE u.age &gt; $age return u",
    null,
    {params:{age:15}, stream: true}
)
YIELD file, nodes, relationships, properties, data
RETURN file, nodes, relationships, properties, data</code></pre><p>
                  
               </p>
               <div class="table" id="d0e14065">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.20.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>8</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"{\"u\":{\"type\":\"node\",\"id\":\"0\",\"labels\":[\"User\"],\"properties\":{\"born\":\"2015-07-04T19:32:24\",\"name\":\"Adam\",\"place\":{\"crs\":\"wgs-84\",\"latitude\":33.46789,\"longitude\":13.1,\"height\":null},\"age\":42,\"male\":true,\"kids\":[\"Sam\",\"Anna\",\"Grace\"]}}}
                                 {\"u\":{\"type\":\"node\",\"id\":\"1\",\"labels\":[\"User\"],\"properties\":{\"name\":\"Jim\",\"age\":42}}}"
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p><span class="formalpara-title">The following query exports a complex Cypher map structure to the file <code class="literal">complex-cypher-structure.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">WITH "RETURN {
	value:1,
    data:[
    	10, 'car', null,
        point({ longitude: 56.7, latitude: 12.78 }),
        point({ longitude: 56.7, latitude: 12.78, height: 8 }),
        point({ x: 2.3, y: 4.5 }),
        point({ x: 2.3, y: 4.5, z: 2 }),
        date('2018-10-10'),
        datetime('2018-10-18T14:21:40.004Z'),
        localdatetime({ year:1984, week:10, dayOfWeek:3, hour:12, minute:31, second:14, millisecond: 645 }),
        {x:1, y:[1,2,3,{age:10}]}
    ]
} as key" AS query
CALL apoc.export.json.query(query, "complex-cypher-structure.json")
YIELD file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data
RETURN file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data</code></pre><p>
                  
               </p>
               <div class="table" id="d0e14113">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.21.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"complex-cypher-structure.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"statement: cols(1)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>16</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">complex-cypher-structure.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">complex-cypher-structure.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"key":{"data":[10,"car",null,{"crs":"wgs-84","latitude":56.7,"longitude":12.78,"height":null},{"crs":"wgs-84-3d","latitude":56.7,"longitude":12.78,"height":8.0},{"crs":"cartesian","x":2.3,"y":4.5,"z":null},{"crs":"cartesian-3d","x":2.3,"y":4.5,"z":2.0},"2018-10-10","2018-10-18T14:21:40.004Z","1984-03-07T12:31:14.645",{"x":1,"y":[1,2,3,{"age":10}]}],"value":1}}</code></pre><p>
                  
               </p>
               <p><span class="formalpara-title">The following query exports a list of <code class="literal">User</code> nodes with an <code class="literal">age</code> property is greater than <code class="literal">10</code> to the file <code class="literal">users-list.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.query(
    "MATCH (u:User) RETURN COLLECT(u) as list",
    "users-list.json",
    {params:{age:10}}
)</code></pre><p>
                  
               </p>
               <div class="table" id="d0e14225">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.22.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"users-list.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"statement: cols(1)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>9</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">users-list.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">users-list.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"list":[{"type":"node","id":"0","labels":["User"],"properties":{"born":"2015-07-04T19:32:24","name":"Adam","place":{"crs":"wgs-84","latitude":33.46789,"longitude":13.1,"height":null},"age":42,"male":true,"kids":["Sam","Anna","Grace"]}},{"type":"node","id":"1","labels":["User"],"properties":{"name":"Jim","age":42}},{"type":"node","id":"2","labels":["User"],"properties":{"age":12}}]}</code></pre><p>
                  
               </p>
               <p><span class="formalpara-title">The following query exports the map representation of <code class="literal">User</code> nodes connected by a <code class="literal">KNOWS</code> relationship to the file <code class="literal">users-map.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.query(
    "MATCH (u:User)-[r:KNOWS]-&gt;(d:User) RETURN u {.*}, d {.*}, r {.*}",
    "users-map.json",
    {params:{age:10}}
)</code></pre><p>
                  
               </p>
               <div class="table" id="d0e14334">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.23.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"users-map.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"statement: cols(3)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>11</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>8</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">users-map.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">users-map.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"u":{"born":"2015-07-04T19:32:24","name":"Adam","place":{"crs":"wgs-84","latitude":33.46789,"longitude":13.1,"height":null},"age":42,"male":true,"kids":["Sam","Anna","Grace"]},"d":{"name":"Jim","age":42},"r":{"bffSince":"P5M1DT12H","since":1993}}</code></pre><p>
                  
               </p>
               <p>In this example we use the <code class="literal">{.*}</code> syntax when returning graph entities in the Cypher statement.
                  This syntax returns a map representation of graph entities, meaning that only properties will be exported; labels and relationship
                  types are excluded.
               </p>
               <p><span class="formalpara-title">The following query exports all <code class="literal">KNOWS</code> relationship, including start and end nodes and their properties, to the file <code class="literal">knows-with-node-properties.json</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">CALL apoc.export.json.query(
    "MATCH p = (u:User)-[rel:KNOWS]-&gt;(u2:User) RETURN rel",
    "knows-with-node-properties.json",
    {writeNodeProperties:true}
)</code></pre><p>
                  
               </p>
               <div class="table" id="d0e14445">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;6.24.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                        <col class="col_6"></col>
                        <col class="col_7"></col>
                        <col class="col_8"></col>
                        <col class="col_9"></col>
                        <col class="col_10"></col>
                        <col class="col_11"></col>
                        <col class="col_12"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">file</th>
                           <th style="text-align: left; vertical-align: top; ">source</th>
                           <th style="text-align: left; vertical-align: top; ">format</th>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">relationships</th>
                           <th style="text-align: left; vertical-align: top; ">properties</th>
                           <th style="text-align: left; vertical-align: top; ">time</th>
                           <th style="text-align: left; vertical-align: top; ">rows</th>
                           <th style="text-align: left; vertical-align: top; ">batchSize</th>
                           <th style="text-align: left; vertical-align: top; ">batches</th>
                           <th style="text-align: left; vertical-align: top; ">done</th>
                           <th style="text-align: left; vertical-align: top; ">data</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"knows-with-node-properties.json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"statement: cols(1)"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>"json"</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>20</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>-1</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>0</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>TRUE</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>NULL</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The contents of <code class="literal">knows-with-node-properties.json</code> are shown below:
               </p>
               <p><span class="formalpara-title">knows-with-node-properties.json.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="json">{"rel":{"id":"0","type":"relationship","label":"KNOWS","properties":{"bffSince":"P5M1DT12H","since":1993},"start":{"id":"0","labels":["User"],"properties":{"born":"2015-07-04T19:32:24","name":"Adam","place":{"crs":"wgs-84","latitude":33.46789,"longitude":13.1,"height":null},"age":42,"male":true,"kids":["Sam","Anna","Grace"]}},"end":{"id":"1","labels":["User"],"properties":{"name":"Jim","age":42}}}}</code></pre><p>
                  
               </p>
            </section>
         </section>
      </section>
      <footer><script type="text/javascript">
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          //Allow Linker
          ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
          ga('send', 'pageview');
          // Load the plugin.
          ga('require', 'linker');
          // Define which domains to autoLink.
          ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
        </script><script type="text/javascript">
          (function() {
          var didInit = false;
          function initMunchkin() {
            if(didInit === false) {
              didInit = true;
              Munchkin.init('710-RRC-335');
            }
          }
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.async = true;
          s.src = '//munchkin.marketo.net/munchkin.js';
          s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
              initMunchkin();
            }
          };
          s.onload = initMunchkin;
          document.getElementsByTagName('head')[0].appendChild(s);
          })();
        </script></footer>
   </body>
</html>