
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta charset="utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
      <meta class="swiftype" name="neo4j-site" data-type="enum" content="Reference Docs"></meta>
      <meta class="swiftype" name="main-search-priority" data-type="integer" content="3"></meta>
      <title>12.2.&nbsp;Expand paths - Chapter&nbsp;12.&nbsp;Advanced Graph Querying</title>
      <link rel="stylesheet" type="text/css" href="../../docbook.css"></link>
      <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,300italic"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/codemirror.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/theme/neo.min.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/chunked-base.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/extra.css"></link><script src="//code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script><script src="//cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js" type="text/javascript"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/codemirror.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/addon/runmode/runmode.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/mode/cypher/cypher.min.js" type="text/javascript"></script><script src="../../javascript/datatable.js" type="text/javascript"></script><script src="../../javascript/colorize.js" type="text/javascript"></script><script src="../../javascript/tabs-for-chunked.js" type="text/javascript"></script><script src="../../javascript/mp-nav.js" type="text/javascript"></script><script src="../../javascript/versionswitcher.js" type="text/javascript"></script><script src="../../javascript/version.js" type="text/javascript"></script><script src="../../javascript/feedback.js" type="text/javascript"></script><script src="//s3-eu-west-1.amazonaws.com/alpha.neohq.net/docs/new-manual/assets/search.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"></meta>
      <meta name="description" content="This section describes a procedure that can be used to expand the paths of variable length path traversals."></meta>
      <link rel="prev" href="../expand-subgraph-nodes/" title="12.4.&nbsp;Expand to nodes in a subgraph"></link>
      <link rel="next" href="../expand-paths-config/" title="12.3.&nbsp;Expand paths with config"></link>
      <link rel="shortcut icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico"></link><script>var frontpage_relpath = "../../";
        $(document).ready(function() {
          CodeMirror.colorize();
          tabTheSource($('body'));
          var $header = $('header').first();
          $header.prepend(
            $('<a href="https://neo4j.com/docs/labs/" id="logo"><img src="https://s3.amazonaws.com/dev.assets.neo4j.com/wp-content/uploads/20190802073913/labs-logo6.png" alt="Neo4j Labs Logo"/></a>')
          );
          var sidebar = $('<div id="sidebar-wrapper"/>');
          $.get('toc.html', function (d){
            $(d).appendTo(sidebar);
            highlightToc();
            highlightLibraryHeader();
          });
          sidebar.insertAfter($('header').first());
          
        });

        </script></head>
   <body>
      <header>
         <div class="searchbox">
            <form id="search-form" class="search" name="search-form" role="search"><input id="search-form-input" name="q" title="search" type="search" lang="en" placeholder="Search Neo4j docs..." aria-label="Search Neo4j documentation" max-length="128" required="required"></input><input id="search-form-button" type="submit" value="Search"></input></form>
         </div>
         <ul class="documentation-library">
            <li><a href="https://neo4j.com/docs/labs/apoc/4.0/">APOC</a></li>
            <li><a href="https://neo4j.com/docs/labs/neo4j-streams/current/">Neo4j Streams</a></li>
            <li><a href="https://neo4j.com/docs/labs/nsmntx/current/">Neo Semantics</a></li>
            <li><a href="https://neo4j.com/docs/graph-algorithms/current/">Graph Algorithms</a></li>
            <li><a href="https://neo4j.com/docs/developer-manual/current/">Developer Manual</a></li>
         </ul>
         <nav id="header-nav"><span class="nav-previous"><a accesskey="p" href="../expand-subgraph-nodes/"><span class="fa fa-long-arrow-left" aria-hidden="true"></span>Expand to nodes in a subgraph</a></span><span class="nav-current">
               <p class="nav-title hidden">12.2.&nbsp;Expand paths</p></span><span class="nav-next"><a accesskey="n" href="../expand-paths-config/">Expand paths with config<span class="fa fa-long-arrow-right" aria-hidden="true"></span></a></span></nav>
      </header>
      <div id="search-results" class="hidden"></div>
      <section class="section" id="path-expander-paths">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a class="anchor" href="#path-expander-paths"></a>12.2.&nbsp;Expand paths
                  </h2>
               </div>
            </div>
         </div>
         <div class="abstract">
            <p>This section describes a procedure that can be used to expand the paths of variable length path traversals.</p>
         </div>
         <p>The expand paths procedure is the most basic of the <a class="link" href="../path-expander/" title="12.1.&nbsp;Path Expander Overview">path expanders</a>.
            This procedure enables path traversals based on relationship filters and node filters.
            See <a class="xref" href="../expand-paths-config/" title="12.3.&nbsp;Expand paths with config">Section&nbsp;12.3, &#8220;Expand paths with config&#8221;</a> if more control is required over the traversal.
         </p>
         <p>This section includes the following:</p>
         <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
               <li class="listitem"><a class="xref" href="#path-expander-paths-procedure-overview" title="12.2.1.&nbsp;Procedure Overview">Section&nbsp;12.2.1, &#8220;Procedure Overview&#8221;</a></li>
               <li class="listitem"><a class="xref" href="#path-expander-paths-parameter-syntax" title="12.2.2.&nbsp;Parameter Syntax">Section&nbsp;12.2.2, &#8220;Parameter Syntax&#8221;</a></li>
               <li class="listitem"><a class="xref" href="#path-expander-paths-examples" title="12.2.3.&nbsp;Examples">Section&nbsp;12.2.3, &#8220;Examples&#8221;</a></li>
            </ul>
         </div>
         <section class="section" id="path-expander-paths-procedure-overview">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#path-expander-paths-procedure-overview"></a>12.2.1.&nbsp;Procedure Overview
                     </h3>
                  </div>
               </div>
            </div>
            <p>The procedure is described below:</p>
            <div class="informaltable">
               <div class="table" id="d0e27349">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">type</th>
                           <th style="text-align: left; vertical-align: top; ">qualified name</th>
                           <th style="text-align: left; vertical-align: top; ">signature</th>
                           <th style="text-align: left; vertical-align: top; ">description</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>procedure</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.path.expand</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.path.expand(start :: ANY?, relationshipFilter :: STRING?, labelFilter :: STRING?, minLevel :: INTEGER?, maxLevel :: INTEGER?)
                                    :: (path :: PATH?)</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>apoc.path.expand(startNode &lt;id&gt;|Node|list, 'TYPE|TYPE_OUT&gt;|&lt;TYPE_IN', '+YesLabel|-NoLabel', minLevel, maxLevel ) yield path
                                 - expand from start node following the given relationships from min to max-level adhering to the label filters
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
         </section>
         <section class="section" id="path-expander-paths-parameter-syntax">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#path-expander-paths-parameter-syntax"></a>12.2.2.&nbsp;Parameter Syntax
                     </h3>
                  </div>
               </div>
            </div>
            <p>This procedure takes the following parameters:</p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem"><code class="literal">start</code> - a list of nodes or node ids
                  </li>
                  <li class="listitem"><code class="literal">relationshipFilter</code> - the relationship types to be expanded
                  </li>
                  <li class="listitem"><code class="literal">labelFilter</code> - the node labels to be expanded
                  </li>
                  <li class="listitem"><code class="literal">minLevel</code> - the minimum number of hops in our traversal
                  </li>
                  <li class="listitem"><code class="literal">maxLevel</code> - the maximum number of hops in our traversal
                  </li>
               </ul>
            </div>
            <p><span class="strong"><strong>Relationship Filters</strong></span></p>
            <p>The syntax for relationship filters is described below:</p>
            <p>Syntax: <code class="literal">[&lt;]RELATIONSHIP_TYPE1[&gt;]|[&lt;]RELATIONSHIP_TYPE2[&gt;]|&#8230;&#8203;</code></p>
            <div class="informaltable">
               <div class="table" id="d0e27421">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">input</th>
                           <th style="text-align: left; vertical-align: top; ">type</th>
                           <th style="text-align: left; vertical-align: top; ">direction</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">LIKES&gt;</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">LIKES</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>OUTGOING</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">&lt;FOLLOWS</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">FOLLOWS</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>INCOMING</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">KNOWS</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">KNOWS</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>BOTH</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">&gt;</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">any type</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>OUTGOING</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">&lt;</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">any type</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>INCOMING</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <p><span class="strong"><strong>Label Filters</strong></span></p>
            <p>The syntax for label filters is described below:</p>
            <p>Syntax: <code class="literal">[+-/&gt;]LABEL1|LABEL2|*|&#8230;&#8203;</code></p>
            <div class="informaltable">
               <div class="table" id="d0e27504">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">input</th>
                           <th style="text-align: left; vertical-align: top; ">result</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">-Foe</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>blacklist filter - No node in the path will have a label in the blacklist.</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">+Friend</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>whitelist filter - All nodes in the path must have a label in the whitelist (exempting termination and end nodes, if using
                                 those filters).
                                 If no whitelist operator is present, all labels are considered whitelisted.
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">/Friend</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>termination filter - Only return paths up to a node of the given labels, and stop further expansion beyond it.
                                 Termination nodes do not have to respect the whitelist. Termination filtering takes precedence over end node filtering.
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">&gt;Friend</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>end node filter - Only return paths up to a node of the given labels, but continue expansion to match on end nodes beyond
                                 it.
                                 End nodes do not have to respect the whitelist to be returned, but expansion beyond them is only allowed if the node has a
                                 label in the whitelist.
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
         </section>
         <section class="section" id="path-expander-paths-examples">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#path-expander-paths-examples"></a>12.2.3.&nbsp;Examples
                     </h3>
                  </div>
               </div>
            </div>
            <p>The examples in this section are based on the following sample graph:</p><pre class="programlisting highlight"><code data-lang="cypher">MERGE (mark:Person:DevRel {name: "Mark"})
MERGE (praveena:Person:Engineering {name: "Praveena"})
MERGE (joe:Person:Field {name: "Joe"})
MERGE (lju:Person:DevRel {name: "Lju"})
MERGE (zhen:Person:Engineering {name: "Zhen"})
MERGE (stefan:Person:Field {name: "Stefan"})
MERGE (alicia:Person:Product {name: "Alicia"})
MERGE (martin:Person:Engineering {name: "Martin"})
MERGE (jake:Person:Product {name: "Jake"})

MERGE (zhen)-[:KNOWS]-(stefan)
MERGE (zhen)-[:KNOWS]-(lju)
MERGE (zhen)-[:KNOWS]-(praveena)
MERGE (zhen)-[:KNOWS]-(martin)
MERGE (mark)-[:KNOWS]-(jake)
MERGE (alicia)-[:KNOWS]-(jake)

MERGE (alicia)-[:FOLLOWS]-&gt;(joe)
MERGE (joe)-[:FOLLOWS]-&gt;(mark)
MERGE (joe)-[:FOLLOWS]-&gt;(praveena)
MERGE (joe)-[:FOLLOWS]-&gt;(zhen)
MERGE (mark)-[:FOLLOWS]-&gt;(stefan)
MERGE (stefan)-[:FOLLOWS]-&gt;(joe)
MERGE (praveena)-[:FOLLOWS]-&gt;(joe)</code></pre><p>The Neo4j Browser visualization below shows the sample graph:</p>
            <div class="informalfigure">
               <div class="mediaobject"><img src="../../images/apoc.path.expand.svg" alt="apoc.path.expand"></img></div>
            </div>
            <p>The <code class="literal">KNOWS</code> relationship type is considered to be bidirectional, where if Zhen knows Stefan, we can imply that Stefan knows Zhen.
               When using the <code class="literal">KNOWS</code> relationship we will ignore the direction.
            </p>
            <p>The <code class="literal">FOLLOWS</code> relationship has a direction, so we will specify a direction when we use it.
            </p>
            <p>Let&#8217;s start by expanding paths from the Praveena node.
               We only want to consider the <code class="literal">KNOWS</code> relationship type, so we&#8217;ll specify that as the relationship filter.
            </p>
            <p><span class="formalpara-title">The following returns the paths to people that Praveena <code class="literal">KNOWS</code> from 1 to 2 hops.&nbsp;</span>
               
            </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expand(p, "KNOWS", null, 1, 2)
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
               
            </p>
            <div class="table" id="d0e27592">
               <table class="table" summary="Results" border="1">
                  <caption class="table-title">Table&nbsp;12.1.&nbsp;Results</caption>
                  <colgroup>
                     <col class="col_1"></col>
                     <col class="col_2"></col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th style="text-align: left; vertical-align: top; ">path</th>
                        <th style="text-align: left; vertical-align: top; ">hops</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>1</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name:
                              "Martin"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field {name: "Stefan"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p>Praveena only has a direct <code class="literal">KNOWS</code> relationship to Zhen, but Zhen has <code class="literal">KNOWS</code> relationships to 3 other people, which means they&#8217;re 2 hops away from Praveena.
            </p>
            <p>We can also provide a node label filter to restrict the nodes that are returned.
               The following query only returns paths where every node has the <code class="literal">Engineering</code> label.
            </p>
            <p><span class="formalpara-title">The following returns paths containing only <code class="literal">Engineering</code> people that Praveena <code class="literal">KNOWS</code> from 1 to 2 hops.&nbsp;</span>
               
            </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expand(p, "KNOWS", "+Engineering", 1, 2)
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
               
            </p>
            <div class="table" id="d0e27660">
               <table class="table" summary="Results" border="1">
                  <caption class="table-title">Table&nbsp;12.2.&nbsp;Results</caption>
                  <colgroup>
                     <col class="col_1"></col>
                     <col class="col_2"></col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th style="text-align: left; vertical-align: top; ">path</th>
                        <th style="text-align: left; vertical-align: top; ">hops</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>1</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name:
                              "Martin"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p>We lose the paths that ended with Lju and Stefan because neither of those nodes had the <code class="literal">Engineering</code> label.
            </p>
            <p>We can specify multiple relationship types.
               The following query starts from the Alicia node, and then expands the <code class="literal">FOLLOWS</code> and <code class="literal">KNOWS</code> relationships:
            </p>
            <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops.&nbsp;</span>
               
            </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
CALL apoc.path.expand(p, "FOLLOWS&gt;|KNOWS", "", 1, 3)
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
               
            </p>
            <div class="table" id="d0e27714">
               <table class="table" summary="Results" border="1">
                  <caption class="table-title">Table&nbsp;12.3.&nbsp;Results</caption>
                  <colgroup>
                     <col class="col_1"></col>
                     <col class="col_2"></col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th style="text-align: left; vertical-align: top; ">path</th>
                        <th style="text-align: left; vertical-align: top; ">hops</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>1</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>1</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>1</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                              {name: "John"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                              {name: "Martin"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                              {name: "Praveena"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel
                              {name: "Lju"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field
                              {name: "Stefan"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field
                              {name: "Joe"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering
                              {name: "Zhen"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                              {name: "Stefan"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:KNOWS]&#8594;(:Person:Product
                              {name: "Jake"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})-[:FOLLOWS]&#8594;(:Person:Field
                              {name: "Joe"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                              {name: "Stefan"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p>This query returns 19 paths, Alicia is very well connected!</p>
            <p>We can also specify traversal termination criteria using label filters.
               If we wanted to terminate a traversal as soon as the traversal encounters a node containing the <code class="literal">Engineering</code> label, we can use the <code class="literal">/Engineering</code> node filter.
            </p>
            <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, terminating as soon as a node with the <code class="literal">Engineering</code> label is reached.&nbsp;</span>
               
            </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
CALL apoc.path.expand(p, "FOLLOWS&gt;|KNOWS", "/Engineering", 1, 3)
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
               
            </p>
            <div class="table" id="d0e27887">
               <table class="table" summary="Results" border="1">
                  <caption class="table-title">Table&nbsp;12.4.&nbsp;Results</caption>
                  <colgroup>
                     <col class="col_1"></col>
                     <col class="col_2"></col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th style="text-align: left; vertical-align: top; ">path</th>
                        <th style="text-align: left; vertical-align: top; ">hops</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p>We&#8217;re now down to only two paths.
               But this query doesn&#8217;t capture all of the paths from Alicia that end in a node with the <code class="literal">Engineering</code> label.
               We can use the <code class="literal">&gt;Engineering</code> node filter to define a traversal that:
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">only returns paths that terminate at nodes with the <code class="literal">Engineering</code> label
                  </li>
                  <li class="listitem">continues expansion to end nodes after that, looking for more paths that end with the <code class="literal">Engineering</code> label
                  </li>
               </ul>
            </div>
            <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, where paths end with a node with the <code class="literal">Engineering</code> label.&nbsp;</span>
               
            </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
CALL apoc.path.expand(p, "FOLLOWS&gt;|KNOWS", "&gt;Engineering", 1, 3)
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
               
            </p>
            <div class="table" id="d0e27952">
               <table class="table" summary="Results" border="1">
                  <caption class="table-title">Table&nbsp;12.5.&nbsp;Results</caption>
                  <colgroup>
                     <col class="col_1"></col>
                     <col class="col_2"></col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th style="text-align: left; vertical-align: top; ">path</th>
                        <th style="text-align: left; vertical-align: top; ">hops</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>2</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                              {name: "Martin"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                              {name: "Praveena"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering
                              {name: "Zhen"})
                           </p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>3</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p>Our query now also returns paths going through Praveena and Zhen, one going to Martin, and other others going back to Zhen
               and Praveena!
            </p>
         </section>
      </section>
      <footer><script type="text/javascript">
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          //Allow Linker
          ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
          ga('send', 'pageview');
          // Load the plugin.
          ga('require', 'linker');
          // Define which domains to autoLink.
          ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
        </script><script type="text/javascript">
          (function() {
          var didInit = false;
          function initMunchkin() {
            if(didInit === false) {
              didInit = true;
              Munchkin.init('710-RRC-335');
            }
          }
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.async = true;
          s.src = '//munchkin.marketo.net/munchkin.js';
          s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
              initMunchkin();
            }
          };
          s.onload = initMunchkin;
          document.getElementsByTagName('head')[0].appendChild(s);
          })();
        </script></footer>
   </body>
</html>