
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta charset="utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
      <meta class="swiftype" name="neo4j-site" data-type="enum" content="Reference Docs"></meta>
      <meta class="swiftype" name="main-search-priority" data-type="integer" content="3"></meta>
      <title>12.3.&nbsp;Expand paths with config - Chapter&nbsp;12.&nbsp;Advanced Graph Querying</title>
      <link rel="stylesheet" type="text/css" href="../../docbook.css"></link>
      <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,300italic"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/codemirror.min.css"></link>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/theme/neo.min.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/chunked-base.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/extra.css"></link><script src="//code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script><script src="//cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js" type="text/javascript"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/codemirror.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/addon/runmode/runmode.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.11.0/mode/cypher/cypher.min.js" type="text/javascript"></script><script src="../../javascript/datatable.js" type="text/javascript"></script><script src="../../javascript/colorize.js" type="text/javascript"></script><script src="../../javascript/tabs-for-chunked.js" type="text/javascript"></script><script src="../../javascript/mp-nav.js" type="text/javascript"></script><script src="../../javascript/versionswitcher.js" type="text/javascript"></script><script src="../../javascript/version.js" type="text/javascript"></script><script src="../../javascript/feedback.js" type="text/javascript"></script><script src="//s3-eu-west-1.amazonaws.com/alpha.neohq.net/docs/new-manual/assets/search.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"></meta>
      <meta name="description" content="This section describes a procedure that can be used to expand the paths of variable length path traversals, while providing configuration options."></meta>
      <link rel="prev" href="../expand-paths/" title="12.2.&nbsp;Expand paths"></link>
      <link rel="next" href="../expand-spanning-tree/" title="12.6.&nbsp;Expand a spanning tree"></link>
      <link rel="shortcut icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico"></link><script>var frontpage_relpath = "../../";
        $(document).ready(function() {
          CodeMirror.colorize();
          tabTheSource($('body'));
          var $header = $('header').first();
          $header.prepend(
            $('<a href="https://neo4j.com/docs/labs/" id="logo"><img src="https://s3.amazonaws.com/dev.assets.neo4j.com/wp-content/uploads/20190802073913/labs-logo6.png" alt="Neo4j Labs Logo"/></a>')
          );
          var sidebar = $('<div id="sidebar-wrapper"/>');
          $.get('toc.html', function (d){
            $(d).appendTo(sidebar);
            highlightToc();
            highlightLibraryHeader();
          });
          sidebar.insertAfter($('header').first());
          
        });

        </script></head>
   <body>
      <header>
         <div class="searchbox">
            <form id="search-form" class="search" name="search-form" role="search"><input id="search-form-input" name="q" title="search" type="search" lang="en" placeholder="Search Neo4j docs..." aria-label="Search Neo4j documentation" max-length="128" required="required"></input><input id="search-form-button" type="submit" value="Search"></input></form>
         </div>
         <ul class="documentation-library">
            <li><a href="https://neo4j.com/docs/labs/apoc/4.0/">APOC</a></li>
            <li><a href="https://neo4j.com/docs/labs/neo4j-streams/current/">Neo4j Streams</a></li>
            <li><a href="https://neo4j.com/docs/labs/nsmntx/current/">Neo Semantics</a></li>
            <li><a href="https://neo4j.com/docs/graph-algorithms/current/">Graph Algorithms</a></li>
            <li><a href="https://neo4j.com/docs/developer-manual/current/">Developer Manual</a></li>
         </ul>
         <nav id="header-nav"><span class="nav-previous"><a accesskey="p" href="../expand-paths/"><span class="fa fa-long-arrow-left" aria-hidden="true"></span>Expand paths</a></span><span class="nav-current">
               <p class="nav-title hidden">12.3.&nbsp;Expand paths with config</p></span><span class="nav-next"><a accesskey="n" href="../expand-spanning-tree/">Expand a spanning tree<span class="fa fa-long-arrow-right" aria-hidden="true"></span></a></span></nav>
      </header>
      <div id="search-results" class="hidden"></div>
      <section class="section" id="path-expander-paths-config">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a class="anchor" href="#path-expander-paths-config"></a>12.3.&nbsp;Expand paths with config
                  </h2>
               </div>
            </div>
         </div>
         <div class="abstract">
            <p>This section describes a procedure that can be used to expand the paths of variable length path traversals, while providing
               configuration options.
            </p>
         </div>
         <p>The expand paths with config procedure enables powerful variable length path traversals with fine grained control over the
            traversals.
            For a more basic version of the algorithm where fine grained control over traversals isn&#8217;t required, see <a class="xref" href="../expand-paths/" title="12.2.&nbsp;Expand paths">Section&nbsp;12.2, &#8220;Expand paths&#8221;</a>.
         </p>
         <p>This section includes:</p>
         <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
               <li class="listitem"><a class="xref" href="#path-expander-paths-config-overview" title="12.3.1.&nbsp;Procedure Overview">Section&nbsp;12.3.1, &#8220;Procedure Overview&#8221;</a></li>
               <li class="listitem"><a class="xref" href="#path-expander-paths-config-config" title="12.3.2.&nbsp;Configuration parameters">Section&nbsp;12.3.2, &#8220;Configuration parameters&#8221;</a></li>
               <li class="listitem"><a class="xref" href="#path-expander-paths-config-config-sequences" title="12.3.3.&nbsp;Specifying Sequences of node labels and relationship types">Section&nbsp;12.3.3, &#8220;Specifying Sequences of node labels and relationship types&#8221;</a></li>
               <li class="listitem">
                  <p class="simpara"><a class="xref" href="#path-expander-paths-config-examples" title="12.3.4.&nbsp;Examples">Section&nbsp;12.3.4, &#8220;Examples&#8221;</a></p>
                  <div class="itemizedlist">
                     <ul class="itemizedlist" style="list-style-type: circle; ">
                        <li class="listitem"><a class="xref" href="#path-expander-paths-config-examples-label-relationship-filters" title="12.3.4.1.&nbsp;Relationship Type and Node Label filters">Section&nbsp;12.3.4.1, &#8220;Relationship Type and Node Label filters&#8221;</a></li>
                        <li class="listitem"><a class="xref" href="#path-expander-paths-config-examples-end-nodes-terminator-nodes" title="12.3.4.2.&nbsp;Terminator Nodes and End Nodes">Section&nbsp;12.3.4.2, &#8220;Terminator Nodes and End Nodes&#8221;</a></li>
                        <li class="listitem"><a class="xref" href="#path-expander-paths-config-examples-whitelist-blacklist" title="12.3.4.3.&nbsp;Whitelist Nodes and Blacklist Nodes">Section&nbsp;12.3.4.3, &#8220;Whitelist Nodes and Blacklist Nodes&#8221;</a></li>
                        <li class="listitem"><a class="xref" href="#path-expander-paths-config-examples-bfs-dfs" title="12.3.4.4.&nbsp;Breadth First Search and Depth First Search">Section&nbsp;12.3.4.4, &#8220;Breadth First Search and Depth First Search&#8221;</a></li>
                        <li class="listitem"><a class="xref" href="#path-expander-paths-config-examples-uniqueness" title="12.3.4.5.&nbsp;Uniqueness">Section&nbsp;12.3.4.5, &#8220;Uniqueness&#8221;</a></li>
                        <li class="listitem"><a class="xref" href="#path-expander-paths-config-examples-sequence-rel-types" title="12.3.4.6.&nbsp;Sequences of relationship types">Section&nbsp;12.3.4.6, &#8220;Sequences of relationship types&#8221;</a></li>
                        <li class="listitem"><a class="xref" href="#path-expander-paths-config-examples-sequence-node-labels" title="12.3.4.7.&nbsp;Sequences of node labels">Section&nbsp;12.3.4.7, &#8220;Sequences of node labels&#8221;</a></li>
                     </ul>
                  </div>
               </li>
            </ul>
         </div>
         <section class="section" id="path-expander-paths-config-overview">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#path-expander-paths-config-overview"></a>12.3.1.&nbsp;Procedure Overview
                     </h3>
                  </div>
               </div>
            </div>
            <p>The procedure is described below:</p>
            <div class="informaltable">
               <div class="table" id="d0e28054">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">type</th>
                           <th style="text-align: left; vertical-align: top; ">qualified name</th>
                           <th style="text-align: left; vertical-align: top; ">signature</th>
                           <th style="text-align: left; vertical-align: top; ">description</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>procedure</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.path.expandConfig</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">apoc.path.expandConfig(start :: ANY?, config :: MAP?) :: (path :: PATH?)</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>apoc.path.expandConfig(startNode &lt;id&gt;|Node|list, {minLevel,maxLevel,uniqueness,relationshipFilter,labelFilter,uniqueness:'RELATIONSHIP_PATH',bfs:true,
                                 filterStartNode:false, limit:-1, optional:false, endNodes:[], terminatorNodes:[], sequence, beginSequenceAtStart:true}) yield
                                 path - expand from start node following the given relationships from min to max-level adhering to the label filters.
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
         </section>
         <section class="section" id="path-expander-paths-config-config">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#path-expander-paths-config-config"></a>12.3.2.&nbsp;Configuration parameters
                     </h3>
                  </div>
               </div>
            </div>
            <p>The procedures support the following config parameters:</p>
            <div class="table" id="d0e28091">
               <table class="table" summary="Config parameters" border="1">
                  <caption class="table-title">Table&nbsp;12.6.&nbsp;Config parameters</caption>
                  <colgroup>
                     <col class="col_1"></col>
                     <col class="col_2"></col>
                     <col class="col_3"></col>
                     <col class="col_4"></col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th style="text-align: left; vertical-align: top; ">name</th>
                        <th style="text-align: left; vertical-align: top; ">type</th>
                        <th style="text-align: left; vertical-align: top; ">default</th>
                        <th style="text-align: left; vertical-align: top; ">description</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>minLevel</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Long</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>-1</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>the minimum number of hops in the traversal</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>maxLevel</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Long</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>-1</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>the maximum number of hops in the traversal</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>relationshipFilter</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>String</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>null</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>the relationship types and directions to traverse.</p>
                           <p>See <a class="xref" href="#path-expander-paths-config-config-relationship-filters" title="12.3.2.1.&nbsp;Relationship Filters">Section&nbsp;12.3.2.1, &#8220;Relationship Filters&#8221;</a>.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>labelFilter</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>String</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>null</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>the node labels to traverse.</p>
                           <p>See <a class="xref" href="#path-expander-paths-config-config-label-filters" title="12.3.2.2.&nbsp;Label Filters">Section&nbsp;12.3.2.2, &#8220;Label Filters&#8221;</a>.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>sequence</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>String</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>null</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>comma-separated alternating label and relationship filters, for each step in a repeating sequence.
                              If present, <code class="literal">labelFilter</code>, and <code class="literal">relationshipFilter</code> are ignored, as this takes priority.
                           </p>
                           <p>See <a class="xref" href="#path-expander-paths-config-config-sequences" title="12.3.3.&nbsp;Specifying Sequences of node labels and relationship types">Section&nbsp;12.3.3, &#8220;Specifying Sequences of node labels and relationship types&#8221;</a>.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>beginSequenceAtStart</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Boolean</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>true</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>starts matching sequences of node labels and/or relationship types (defined in <code class="literal">relationshipFilter</code>, <code class="literal">labelFilter</code>, or <code class="literal">sequences</code>) one node away from the start node.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>uniqueness</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>String</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>RELATIONSHIP_PATH</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>the strategy to use when expanding relationships in a traversal.</p>
                           <p>See <a class="xref" href="#path-expander-paths-config-config-uniqueness" title="12.3.2.3.&nbsp;Uniqueness">Section&nbsp;12.3.2.3, &#8220;Uniqueness&#8221;</a>.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>bfs</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Boolean</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>true</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>use Breadth First Search when traversing. Uses Depth First Search if set to <code class="literal">false</code></p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>filterStartNode</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Boolean</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>false</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>whether the <code class="literal">labelFilter</code> and <code class="literal">sequence</code> apply to the start node of the expansion.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>limit</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Long</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>-1</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>limit the number of paths returned. When using <code class="literal">bfs:true</code>, this has the effect of returning paths to the <code class="literal">n</code> nearest nodes with labels in the termination or end node filter, where <code class="literal">n</code> is the limit given.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>optional</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Boolean</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>false</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>is path expansion optional?
                              If set to <code class="literal">true</code>, a <code class="literal">null</code> value is yielded whenever the expansion would normally eliminate rows due to no results.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>endNodes</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>List&lt;Node&gt;</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>null</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>only these nodes can end returned paths, and expansion will continue past these nodes, if possible.</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>terminatorNodes</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>List&lt;Node&gt;</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>null</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Only these nodes can end returned paths, and expansion won&#8217;t continue past these nodes.</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>whitelistNodes</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>List&lt;Node&gt;</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>null</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>Only these nodes are allowed in the expansion (though endNodes and terminatorNodes will also be allowed, if present).</p>
                        </td>
                     </tr>
                     <tr>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>blacklistNodes</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>List&lt;Node&gt;</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>null</p>
                        </td>
                        <td style="text-align: left; vertical-align: top; ">
                           <p>None of the paths returned will include these nodes.</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <section class="section" id="path-expander-paths-config-config-relationship-filters">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-config-relationship-filters"></a>12.3.2.1.&nbsp;Relationship Filters
                        </h4>
                     </div>
                  </div>
               </div>
               <p>The syntax for relationship filters is described below:</p>
               <p>Syntax: <code class="literal">[&lt;]RELATIONSHIP_TYPE1[&gt;]|[&lt;]RELATIONSHIP_TYPE2[&gt;]|&#8230;&#8203;</code></p>
               <div class="informaltable">
                  <div class="table" id="d0e28368">
                     <table class="informaltable" border="1">
                        <colgroup>
                           <col class="col_1"></col>
                           <col class="col_2"></col>
                           <col class="col_3"></col>
                        </colgroup>
                        <thead>
                           <tr>
                              <th style="text-align: left; vertical-align: top; ">input</th>
                              <th style="text-align: left; vertical-align: top; ">type</th>
                              <th style="text-align: left; vertical-align: top; ">direction</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">LIKES&gt;</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">LIKES</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>OUTGOING</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">&lt;FOLLOWS</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">FOLLOWS</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>INCOMING</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">KNOWS</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">KNOWS</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>BOTH</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">&gt;</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">any type</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>OUTGOING</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">&lt;</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">any type</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>INCOMING</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
            </section>
            <section class="section" id="path-expander-paths-config-config-label-filters">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-config-label-filters"></a>12.3.2.2.&nbsp;Label Filters
                        </h4>
                     </div>
                  </div>
               </div>
               <p>The syntax for label filters is described below:</p>
               <p>Syntax: <code class="literal">[+-/&gt;]LABEL1|LABEL2|*|&#8230;&#8203;</code></p>
               <div class="informaltable">
                  <div class="table" id="d0e28451">
                     <table class="informaltable" border="1">
                        <colgroup>
                           <col class="col_1"></col>
                           <col class="col_2"></col>
                        </colgroup>
                        <thead>
                           <tr>
                              <th style="text-align: left; vertical-align: top; ">input</th>
                              <th style="text-align: left; vertical-align: top; ">result</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">-Foe</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>blacklist filter - No node in the path will have a label in the blacklist.</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">+Friend</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>whitelist filter - All nodes in the path must have a label in the whitelist (exempting termination and end nodes, if using
                                    those filters).
                                    If no whitelist operator is present, all labels are considered whitelisted.
                                 </p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">/Friend</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>termination filter - Only return paths up to a node of the given labels, and stop further expansion beyond it.
                                    Termination nodes do not have to respect the whitelist. Termination filtering takes precedence over end node filtering.
                                 </p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">&gt;Friend</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>end node filter - Only return paths up to a node of the given labels, but continue expansion to match on end nodes beyond
                                    it.
                                    End nodes do not have to respect the whitelist to be returned, but expansion beyond them is only allowed if the node has a
                                    label in the whitelist.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
               <p><span class="strong"><strong>Label filter operator precedence and behavior</strong></span></p>
               <p>Multiple label filter operators are allowed at the same time.
                  Take the following example:
               </p>
               <p><code class="literal">labelFilter:'+Person|Movie|-SciFi|&gt;Western|/Romance'</code></p>
               <p>If we work through this label filter, we can see that:</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem"><code class="literal">:Person</code> and <code class="literal">:Movie</code> labels are whitelisted
                     </li>
                     <li class="listitem"><code class="literal">:SciFi</code> is blacklisted
                     </li>
                     <li class="listitem"><code class="literal">:Western</code> is an end node label
                     </li>
                     <li class="listitem"><code class="literal">:Romance</code> is as a termination label.
                     </li>
                  </ul>
               </div>
               <p>The precedence of operator evaluation isn&#8217;t dependent upon their location in the labelFilter but is fixed:</p>
               <p>Blacklist filter <code class="literal">-</code>, termination filter <code class="literal">/</code>, end node filter <code class="literal">&gt;</code>, whitelist filter <code class="literal">+</code>.
               </p>
               <p>This means:</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">No blacklisted label <code class="literal">-</code> will ever be present in the nodes of paths returned, even if the same label (or another label of a node with a blacklisted
                        label) is included in another filter list.
                     </li>
                     <li class="listitem">If the termination filter <code class="literal">/</code> or end node filter <code class="literal">&gt;</code> is used, then only paths up to nodes with those labels will be returned as results. These end nodes are exempt from the whitelist
                        filter.
                     </li>
                     <li class="listitem">If a node is a termination node <code class="literal">/</code>, no further expansion beyond the node will occur.
                     </li>
                     <li class="listitem">The whitelist only applies to nodes up to but not including end nodes from the termination or end node filters. If no end
                        node or termination node operators are present, then the whitelist applies to all nodes of the path.
                     </li>
                     <li class="listitem">If no whitelist operators are present in the labelFilter, this is treated as if all labels are whitelisted.</li>
                  </ul>
               </div>
            </section>
            <section class="section" id="path-expander-paths-config-config-uniqueness">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-config-uniqueness"></a>12.3.2.3.&nbsp;Uniqueness
                        </h4>
                     </div>
                  </div>
               </div>
               <p>Uniqueness of nodes and relationships guides the expansion and the returned results.
                  The table below describes the available values:
               </p>
               <div class="informaltable">
                  <div class="table" id="d0e28579">
                     <table class="informaltable" border="1">
                        <colgroup>
                           <col class="col_1"></col>
                           <col class="col_2"></col>
                        </colgroup>
                        <thead>
                           <tr>
                              <th style="text-align: left; vertical-align: top; ">value</th>
                              <th style="text-align: left; vertical-align: top; ">description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">RELATIONSHIP_PATH</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>For each returned node there&#8217;s a (relationship wise) unique path from the start node to it. This is Cypher&#8217;s default expansion
                                    mode.
                                 </p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">NODE_GLOBAL</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>A node cannot be traversed more than once. This is what the legacy traversal framework does.</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">NODE_LEVEL</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>Entities on the same level are guaranteed to be unique.</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">NODE_PATH</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>For each returned node there&#8217;s a unique path from the start node to it.</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">NODE_RECENT</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>This is like NODE_GLOBAL, but only guarantees uniqueness among the most recent visited nodes, with a configurable count. Traversing
                                    a huge graph is quite memory intensive in that it keeps track of all the nodes it has visited.
                                    For huge graphs a traverser can hog all the memory in the JVM, causing OutOfMemoryError. Together with this Uniqueness you
                                    can supply a count, which is the number of most recent visited nodes. This can cause a node to be visited more than once,
                                    but scales infinitely.
                                 </p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">RELATIONSHIP_GLOBAL</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>A relationship cannot be traversed more than once, whereas nodes can.</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">RELATIONSHIP_LEVEL</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>Entities on the same level are guaranteed to be unique.</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">RELATIONSHIP_RECENT</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>Same as for NODE_RECENT, but for relationships.</p>
                              </td>
                           </tr>
                           <tr>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p><code class="literal">NONE</code></p>
                              </td>
                              <td style="text-align: left; vertical-align: top; ">
                                 <p>No restriction (the user will have to manage it)</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
            </section>
         </section>
         <section class="section" id="path-expander-paths-config-config-sequences">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#path-expander-paths-config-config-sequences"></a>12.3.3.&nbsp;Specifying Sequences of node labels and relationship types
                     </h3>
                  </div>
               </div>
            </div>
            <p>Path expander procedures can expand on repeating sequences of labels, relationship types, or both.
               Sequences can be defined as follows:
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">If only using label sequences, use the <code class="literal">labelFilter</code>, but use commas to separate the filtering for each step in the repeating sequence.
                  </li>
                  <li class="listitem">If only using relationship sequences, use the <code class="literal">relationshipFilter</code>, but use commas to separate the filtering for each step of the repeating sequence.
                  </li>
                  <li class="listitem">If using sequences of both relationships and labels, use the <code class="literal">sequence</code> parameter.
                  </li>
               </ul>
            </div>
            <div class="informaltable">
               <div class="table" id="d0e28686">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                        <col class="col_5"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">Usage</th>
                           <th style="text-align: left; vertical-align: top; ">config param</th>
                           <th style="text-align: left; vertical-align: top; ">description</th>
                           <th style="text-align: left; vertical-align: top; ">syntax</th>
                           <th style="text-align: left; vertical-align: top; ">explanation</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>label sequences only</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">labelFilter</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Same syntax and filters, but uses commas (<code class="literal">,</code>) to separate the filters for each step in the sequence.
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">labelFilter:'Post|-Blocked,Reply,&gt;Admin'</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Start node must be a :Post node that isn&#8217;t :Blocked, next node must be a :Reply, and the next must be an :Admin, then repeat
                                 if able. Only paths ending with the <code class="literal">:Admin</code> node in that position of the sequence will be returned.
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>relationship sequences only</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">relationshipFilter</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Same syntax, but uses commas (<code class="literal">,</code>) to separate the filters for each relationship traversal in the sequence.
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">relationshipFilter:'NEXT&gt;,&lt;FROM,POSTED&gt;|REPLIED&gt;'</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Expansion will first expand <code class="literal">NEXT&gt;</code> from the start node, then <code class="literal">&lt;FROM</code>, then either <code class="literal">POSTED&gt;</code> or <code class="literal">REPLIED&gt;</code>, then repeat if able.
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>sequences of both labels and relationships</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">sequence</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>A string of comma-separated alternating label and relationship filters, for each step in a repeating sequence. The sequence
                                 should begin with a label filter, and end with a relationship filter. If present, <code class="literal">labelFilter</code>, and <code class="literal">relationshipFilter</code> are ignored, as this takes priority.
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">sequence:'Post|-Blocked, NEXT&gt;, Reply, &lt;FROM, &gt;Admin, POSTED&gt;|REPLIED&gt;'</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Combines the behaviors above.</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <p>There are some uses cases where the sequence does not begin at the start node, but at one node distant.</p>
            <p>The config parameter <code class="literal">beginSequenceAtStart</code> toggles this behavior.
               Its default value is <code class="literal">true</code>.
               If set to <code class="literal">false</code>, this changes the expected values for <code class="literal">labelFilter</code>, <code class="literal">relationshipFilter</code>, and <code class="literal">sequence</code> as noted below:
            </p>
            <div class="informaltable">
               <div class="table" id="d0e28809">
                  <table class="informaltable" border="1">
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                        <col class="col_3"></col>
                        <col class="col_4"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">sequence</th>
                           <th style="text-align: left; vertical-align: top; ">altered behavior</th>
                           <th style="text-align: left; vertical-align: top; ">example</th>
                           <th style="text-align: left; vertical-align: top; ">explanation</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">labelFilter</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>The start node is not considered part of the sequence. The sequence begins one node off from the start node.</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">beginSequenceAtStart:false, labelFilter:'Post|-Blocked,Reply,&gt;Admin'</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>The next node(s) out from the start node begins the sequence (and must be a :Post node that isn&#8217;t :Blocked), and only paths
                                 ending with <code class="literal">Admin</code> nodes returned.
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">relationshipFilter</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>The first relationship filter in the sequence string will not be considered part of the repeating sequence, and will only
                                 be used for the first relationship from the start node to the node that will be the actual start of the sequence.
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">beginSequenceAtStart:false, relationshipFilter:'FIRST&gt;,NEXT&gt;,&lt;FROM,POSTED&gt;|REPLIED&gt;'</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">FIRST&gt;</code> will be traversed just from the start node to the node that will be the start of the repeating <code class="literal">NEXT&gt;,&lt;FROM,POSTED&gt;|REPLIED&gt;</code> sequence.
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">sequence</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Combines the above two behaviors.</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p><code class="literal">beginSequenceAtStart:false, sequence:'FIRST&gt;, Post|-Blocked, NEXT&gt;, Reply, &lt;FROM, &gt;Admin, POSTED&gt;|REPLIED&gt;'</code></p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>Combines the behaviors above.</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <div class="admonitionblock note">
               <table>
                  <tbody>
                     <tr>
                        <td class="icon"><i class="fa icon-note" title="note"></i></td>
                        <td class="content">
                           <p><span class="formalpara-title">Sequence tips.&nbsp;</span>Label filtering in sequences work together with the <code class="literal">endNodes</code>+<code class="literal">terminatorNodes</code>, though inclusion of a node must be unanimous.
                           </p>
                           <p>If you need to limit the number of times a sequence repeats, this can be done with the <code class="literal">maxLevel</code> config param (multiply the number of iterations with the size of the nodes in the sequence).
                           </p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </section>
         <section class="section" id="path-expander-paths-config-examples">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#path-expander-paths-config-examples"></a>12.3.4.&nbsp;Examples
                     </h3>
                  </div>
               </div>
            </div>
            <p>The examples in this section are based on the following sample graph:</p><pre class="programlisting highlight"><code data-lang="cypher">MERGE (mark:Person:DevRel {name: "Mark"})
MERGE (lju:Person:DevRel {name: "Lju"})
MERGE (praveena:Person:Engineering {name: "Praveena"})
MERGE (zhen:Person:Engineering {name: "Zhen"})
MERGE (martin:Person:Engineering {name: "Martin"})
MERGE (joe:Person:Field {name: "Joe"})
MERGE (stefan:Person:Field {name: "Stefan"})
MERGE (alicia:Person:Product {name: "Alicia"})
MERGE (jake:Person:Product {name: "Jake"})
MERGE (john:Person:Product {name: "John"})
MERGE (jonny:Person:Sales {name: "Jonny"})
MERGE (anthony:Person:Sales {name: "Anthony"})
MERGE (rik:Person:Sales {name: "Rik"})

MERGE (zhen)-[:KNOWS]-(stefan)
MERGE (zhen)-[:KNOWS]-(lju)
MERGE (zhen)-[:KNOWS]-(praveena)
MERGE (zhen)-[:KNOWS]-(martin)
MERGE (mark)-[:KNOWS]-(jake)
MERGE (alicia)-[:KNOWS]-(jake)
MERGE (jonny)-[:KNOWS]-(anthony)
MERGE (john)-[:KNOWS]-(rik)

MERGE (alicia)-[:FOLLOWS]-&gt;(joe)
MERGE (joe)-[:FOLLOWS]-&gt;(mark)
MERGE (joe)-[:FOLLOWS]-&gt;(praveena)
MERGE (joe)-[:FOLLOWS]-&gt;(zhen)
MERGE (mark)-[:FOLLOWS]-&gt;(stefan)
MERGE (stefan)-[:FOLLOWS]-&gt;(joe)
MERGE (praveena)-[:FOLLOWS]-&gt;(joe)
MERGE (lju)-[:FOLLOWS]-&gt;(jake)
MERGE (alicia)-[:FOLLOWS]-&gt;(jonny)
MERGE (zhen)-[:FOLLOWS]-&gt;(john)
MERGE (anthony)-[:FOLLOWS]-&gt;(joe)</code></pre><p>The Neo4j Browser visualization below shows the sample graph:</p>
            <div class="figure" id="d0e28905">
               <div class="figure-title">Figure&nbsp;12.1.&nbsp;Sample Graph</div>
               <div class="figure-contents">
                  <div class="mediaobject"><img src="../../images/apoc.path.expandConfig.svg" alt="apoc.path.expandConfig"></img></div>
               </div>
            </div>
            <p>The <code class="literal">KNOWS</code> relationship type is considered to be bidirectional, where if Zhen knows Stefan, we can imply that Stefan knows Zhen.
               When using the <code class="literal">KNOWS</code> relationship we will ignore the direction.
            </p>
            <p>The <code class="literal">FOLLOWS</code> relationship has a direction, so we will specify a direction when we use it.
            </p>
            <section class="section" id="path-expander-paths-config-examples-label-relationship-filters">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-examples-label-relationship-filters"></a>12.3.4.1.&nbsp;Relationship Type and Node Label filters
                        </h4>
                     </div>
                  </div>
               </div>
               <p>Let&#8217;s start by expanding paths from the Praveena node.
                  We only want to consider the <code class="literal">KNOWS</code> relationship type, so we&#8217;ll specify that as the <code class="literal">relationshipFilter</code> parameter.
               </p>
               <p><span class="formalpara-title">The following returns the paths to people that Praveena <code class="literal">KNOWS</code> from 1 to 2 hops.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expandConfig(p, {
	relationshipFilter: "KNOWS",
    minLevel: 1,
    maxLevel: 2
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e28949">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.7.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name:
                                 "Martin"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field {name: "Stefan"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>Praveena only has a direct <code class="literal">KNOWS</code> relationship to Zhen, but Zhen has <code class="literal">KNOWS</code> relationships to 3 other people, which means they&#8217;re 2 hops away from Praveena.
               </p>
               <p>We can also provide a node label filter to restrict the nodes that are returned.
                  If we want to only return paths where every node has the <code class="literal">Engineering</code> label, we&#8217;ll provide the value <code class="literal">+Engineering</code> to the <code class="literal">labelFilter</code> parameter.
               </p>
               <p><span class="formalpara-title">The following returns paths containing only <code class="literal">Engineering</code> people that Praveena <code class="literal">KNOWS</code> from 1 to 2 hops.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expandConfig(p, {
	relationshipFilter: "KNOWS",
	labelFilter: "+Engineering",
    minLevel: 1,
    maxLevel: 2
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29023">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.8.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name:
                                 "Martin"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>We lose the paths that ended with Lju and Stefan because neither of those nodes had the <code class="literal">Engineering</code> label.
               </p>
               <p>We can specify multiple relationship types.
                  The following query starts from the Alicia node, and then expands the <code class="literal">FOLLOWS</code> and <code class="literal">KNOWS</code> relationships:
               </p>
               <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    minLevel: 1,
    maxLevel: 3
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29077">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.9.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "John"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Martin"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Praveena"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel
                                 {name: "Lju"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering
                                 {name: "Zhen"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:KNOWS]&#8594;(:Person:Product
                                 {name: "Jake"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>This query returns 19 paths, Alicia is very well connected!</p>
               <p>We can see a Neo4j Browser visualization of the returned paths in <a class="xref" href="#viz-apoc-path-config-alicia" title="Figure&nbsp;12.2.&nbsp;Paths from Alicia">Figure&nbsp;12.2, &#8220;Paths from Alicia&#8221;</a>.
               </p>
               <div class="figure" id="viz-apoc-path-config-alicia">
                  <div class="figure-title">Figure&nbsp;12.2.&nbsp;Paths from Alicia</div>
                  <div class="figure-contents">
                     <div class="mediaobject"><img src="../../images/apoc.path.expandConfig.alicia.svg" alt="apoc.path.expandConfig.alicia"></img></div>
                  </div>
               </div>
               <p>We can also specify traversal termination criteria using label filters.
                  If we wanted to terminate a traversal as soon as the traversal encounters a node containing the <code class="literal">Engineering</code> label, we can use the <code class="literal">/Engineering</code> node filter.
               </p>
               <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, terminating as soon as a node with the <code class="literal">Engineering</code> label is reached.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    labelFilter: "/Engineering",
    minLevel: 1,
    maxLevel: 3
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29263">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.10.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>We&#8217;re now down to only two paths.
                  But this query doesn&#8217;t capture all of the paths from Alicia that end in a node with the <code class="literal">Engineering</code> label.
                  We can use the <code class="literal">&gt;Engineering</code> node filter to define a traversal that:
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">only returns paths that terminate at nodes with the <code class="literal">Engineering</code> label
                     </li>
                     <li class="listitem">continues expansion to end nodes after that, looking for more paths that end with the <code class="literal">Engineering</code> label
                     </li>
                  </ul>
               </div>
               <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, where paths end with a node with the <code class="literal">Engineering</code> label.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    labelFilter: "&gt;Engineering",
    minLevel: 1,
    maxLevel: 3
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29328">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.11.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Martin"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Praveena"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering
                                 {name: "Zhen"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>Our query now also returns paths going through Praveena and Zhen, one going to Martin, and other others going back to Zhen
                  and Praveena!
               </p>
            </section>
            <section class="section" id="path-expander-paths-config-examples-end-nodes-terminator-nodes">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-examples-end-nodes-terminator-nodes"></a>12.3.4.2.&nbsp;Terminator Nodes and End Nodes
                        </h4>
                     </div>
                  </div>
               </div>
               <p>As well as specifying terminator and end labels for traversals, we can also specify terminator and end nodes.</p>
               <p>Let&#8217;s build on the previous query that found people that Alicia <code class="literal">KNOWS</code> or <code class="literal">FOLLOWS</code>.
                  We want any returned paths to stop as soon as the Joe node is encountered, which we can do by passing the Joe node to the
                  <code class="literal">terminatorNodes</code> parameter.
               </p>
               <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, terminating as soon as Joe is reached.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
MATCH (joe:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    minLevel: 1,
    maxLevel: 3,
    terminatorNodes: [joe]
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29408">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.12.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>Alicia <code class="literal">FOLLOWS</code> Joe, but there&#8217;s also another path that goes via Jonny and Anthony.
               </p>
               <p>The terminator nodes approach doesn&#8217;t necessarily find all the paths that exist between Alicia and Joe.
                  There might be other paths that go through the Joe node twice.
                  We can find these paths by passing the Joe node to the <code class="literal">endNodes</code> parameter.
                  If we use this parameter, all returned paths will end at the Joe node, but expansion will continue past this node to try and
                  find other paths that end at Joe.
               </p>
               <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, where paths end when they reach Joe.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
MATCH (joe:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    minLevel: 1,
    maxLevel: 3,
    endNodes: [joe]
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29459">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.13.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>We&#8217;ve got the two paths we got with the terminator nodes approach, from Alicia to Joe, and from Alicia to Jonny to Jonny to
                  Joe.
                  But we&#8217;ve also got an extra path that goes from Alicia to Joe to Praveena to Joe.
               </p>
            </section>
            <section class="section" id="path-expander-paths-config-examples-whitelist-blacklist">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-examples-whitelist-blacklist"></a>12.3.4.3.&nbsp;Whitelist Nodes and Blacklist Nodes
                        </h4>
                     </div>
                  </div>
               </div>
               <p>Whitelist and blacklist nodes can also be specified.</p>
               <p>Let&#8217;s build on the previous query that found people that Alicia <code class="literal">KNOWS</code> or <code class="literal">FOLLOWS</code>.
                  We want any returned paths to only include the nodes Mark, Joe, Zhen, and Praveena, which we can do by passing these nodes
                  to the parameter <code class="literal">whitelistNodes</code>.
               </p>
               <p><span class="formalpara-title">The following returns paths from Alicia following the <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> relationship types from 1 to 3 hops, only including paths that contain Mark, Joe, Zhen, and Praveena.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
MATCH (whitelist:Person)
WHERE whitelist.name IN ["Mark", "Joe", "Zhen", "Praveena"]
WITH p, collect(whitelist) AS whitelistNodes
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    minLevel: 1,
    maxLevel: 3,
    whitelistNodes: whitelistNodes
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29525">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.14.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Praveena"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering
                                 {name: "Zhen"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>Out of the white list, the only person with a direct connection to Alicia is Joe, so all paths go through him.
                  We then go from Joe to the others, and then between each other for the paths of 3 hops.
               </p>
               <p>We can see a Neo4j Browser visualization of the returned paths in <a class="xref" href="#viz-apoc-path-config-whitelist" title="Figure&nbsp;12.3.&nbsp;Paths from Alicia to Mark, Joe, Zhen, and Praveena">Figure&nbsp;12.3, &#8220;Paths from Alicia to Mark, Joe, Zhen, and Praveena&#8221;</a>.
               </p>
               <div class="figure" id="viz-apoc-path-config-whitelist">
                  <div class="figure-title">Figure&nbsp;12.3.&nbsp;Paths from Alicia to Mark, Joe, Zhen, and Praveena</div>
                  <div class="figure-contents">
                     <div class="mediaobject"><img src="../../images/apoc.path.expandConfig.whitelist.svg" alt="apoc.path.expandConfig.whitelist"></img></div>
                  </div>
               </div>
               <p>A blacklist is used to exclude nodes from the returned paths.
                  If we want to exclude paths that contain Joe, we can do this by passing the Joe node to the <code class="literal">blacklistNodes</code> parameter.
               </p>
               <p><span class="formalpara-title">The following returns paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, excluding paths that include Joe.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
MATCH (joe:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    minLevel: 1,
    maxLevel: 3,
    blacklistNodes: [joe]
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29621">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.15.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>This returns a very small set of paths since Joe was a very pivotal node in connecting Alicia to the rest of the graph.</p>
               <p>We can see a Neo4j Browser visualization of the returned paths in <a class="xref" href="#viz-apoc-path-config-blacklist" title="Figure&nbsp;12.4.&nbsp;Paths from Alicia that don&#8217;t include Joe">Figure&nbsp;12.4, &#8220;Paths from Alicia that don&#8217;t include Joe&#8221;</a>.
               </p>
               <div class="figure" id="viz-apoc-path-config-blacklist">
                  <div class="figure-title">Figure&nbsp;12.4.&nbsp;Paths from Alicia that don&#8217;t include Joe</div>
                  <div class="figure-contents">
                     <div class="mediaobject"><img src="../../images/apoc.path.expandConfig.blacklist.svg" alt="apoc.path.expandConfig.blacklist"></img></div>
                  </div>
               </div>
            </section>
            <section class="section" id="path-expander-paths-config-examples-bfs-dfs">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-examples-bfs-dfs"></a>12.3.4.4.&nbsp;Breadth First Search and Depth First Search
                        </h4>
                     </div>
                  </div>
               </div>
               <p>We can control whether the traversal uses the Breadth First Search (BFS), by specifying <code class="literal">bfs: true</code>, or Depth First Search algorithm (DFS), by specifying <code class="literal">bfs: false</code>.
                  This is often combined with the <code class="literal">limit</code> parameter to find the nearest nodes based on the chosen algorithm.
               </p>
               <p><span class="formalpara-title">The following returns 10 paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, using BFS.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
MATCH (joe:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    minLevel: 1,
    maxLevel: 5,
    bfs: true,
    limit: 10
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29712">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.16.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales {name: "Anthony"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "John"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Martin"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>From these results we can see that paths are completely expanded at each level before going onto the next one.
                  For example, we first expand from:
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Alicia <code class="literal">&#8594;</code> Joe
                     </li>
                     <li class="listitem">Alicia <code class="literal">&#8594;</code> Jonny
                     </li>
                     <li class="listitem">Alicia <code class="literal">&#8594;</code> Jake
                     </li>
                  </ul>
               </div>
               <p>Before then following relationships from those nodes.
                  And once it&#8217;s expanded everything at level 2, it will then explore level 3.
               </p>
               <div class="figure" id="viz-apoc-path-config-alicia-bfs">
                  <div class="figure-title">Figure&nbsp;12.5.&nbsp;Paths from Alicia using Breadth First Search</div>
                  <div class="figure-contents">
                     <div class="mediaobject"><img src="../../images/apoc.path.expandConfig.alicia.bfs.svg" alt="apoc.path.expandConfig.alicia.bfs"></img></div>
                  </div>
               </div>
               <p>If we use the Depth First Search algorithm, the traversal will go as far as it can (up to the <code class="literal">maxLevel</code> of hops) down a particular path, before going back up and exploring other ones.
               </p>
               <p><span class="formalpara-title">The following returns 10 paths containing people that Alicia <code class="literal">FOLLOWS</code> or <code class="literal">KNOWS</code> from 1 to 3 hops, using DFS.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Alicia"})
MATCH (joe:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;|KNOWS",
    minLevel: 1,
    maxLevel: 3,
    bfs: false,
    limit: 10
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29846">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.17.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "John"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Martin"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering
                                 {name: "Praveena"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel
                                 {name: "Lju"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering
                                 {name: "Zhen"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>Now we have a different set of paths returned.
                  We don&#8217;t even see the paths from Alicia to Jonny or Alicia to Jake because our limit of 10 paths is completely taken up with
                  paths going through Joe.
               </p>
               <p>We can see a Neo4j Browser visualization of the returned paths in <a class="xref" href="#viz-apoc-path-config-alicia-dfs" title="Figure&nbsp;12.6.&nbsp;Paths from Alicia using Depth First Search">Figure&nbsp;12.6, &#8220;Paths from Alicia using Depth First Search&#8221;</a>.
               </p>
               <div class="figure" id="viz-apoc-path-config-alicia-dfs">
                  <div class="figure-title">Figure&nbsp;12.6.&nbsp;Paths from Alicia using Depth First Search</div>
                  <div class="figure-contents">
                     <div class="mediaobject"><img src="../../images/apoc.path.expandConfig.alicia.dfs.svg" alt="apoc.path.expandConfig.alicia.dfs"></img></div>
                  </div>
               </div>
            </section>
            <section class="section" id="path-expander-paths-config-examples-uniqueness">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-examples-uniqueness"></a>12.3.4.5.&nbsp;Uniqueness
                        </h4>
                     </div>
                  </div>
               </div>
               <p>We can specify the uniqueness strategy to be used by the traversal through the <code class="literal">uniqueness</code> parameter.
                  See <a class="xref" href="#path-expander-paths-config-config-uniqueness" title="12.3.2.3.&nbsp;Uniqueness">Section&nbsp;12.3.2.3, &#8220;Uniqueness&#8221;</a> for a list of valid strategies.
                  The default value is <code class="literal">RELATIONSHIP_PATH</code>.
               </p>
               <p>In this section we&#8217;re going to write queries that start from Joe and traverse the <code class="literal">FOLLOWS</code> relationship.
               </p>
               <p><span class="formalpara-title">The following returns the nodes in paths starting from Joe and traversing the <code class="literal">FOLLOWS</code> relationship type from 1 to 3 hops.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;",
    minLevel: 1,
    maxLevel: 3,
    uniqueness: "RELATIONSHIP_PATH" // default
})
YIELD path
RETURN [node in nodes(path) | node.name] AS nodes, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e29973">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.18.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Zhen"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Praveena"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Mark"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Zhen", "John"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Praveena", "Joe"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Mark", "Stefan"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Praveena", "Joe", "Zhen"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Praveena", "Joe", "Mark"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Mark", "Stefan", "Joe"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>Several of the paths returned contain the Joe node twice.
                  If we want to ensure that the nodes in a path are unique, we can use the <code class="literal">NODE_PATH</code> strategy.
               </p>
               <p><span class="formalpara-title">The following returns the nodes in paths starting from Joe and traversing the <code class="literal">FOLLOWS</code> relationship type from 1 to 3 hops, using the <code class="literal">NODE_PATH</code> strategy.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
    relationshipFilter: "FOLLOWS&gt;",
    minLevel: 1,
    maxLevel: 3,
    uniqueness: "NODE_PATH"
})
YIELD path
RETURN [node in nodes(path) | node.name] AS nodes, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30068">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.19.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Zhen"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Praveena"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Mark"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Zhen", "John"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>["Joe", "Mark", "Stefan"]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The paths returned now have unique lists of nodes.</p>
            </section>
            <section class="section" id="path-expander-paths-config-examples-sequence-rel-types">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-examples-sequence-rel-types"></a>12.3.4.6.&nbsp;Sequences of relationship types
                        </h4>
                     </div>
                  </div>
               </div>
               <p>Sequences of relationship types can be specified by comma separating the values passed to <code class="literal">relationshipFilter</code>.
               </p>
               <p>For example, if we want to start from the Joe node and traverse a sequence of the <code class="literal">FOLLOWS</code> relationship in the outgoing direction and the <code class="literal">KNOWS</code> relationship in either direction, we can specify the relationship filter <code class="literal">FOLLOWS&gt;,KNOWS</code>.
               </p>
               <p><span class="formalpara-title">The following returns the paths of 1 to 4 hops from Joe where the relationship types alternate between <code class="literal">FOLLOWS</code> and <code class="literal">KNOWS</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
	relationshipFilter: "FOLLOWS&gt;,KNOWS",
	beginSequenceAtStart: true,
	minLevel: 1,
	maxLevel: 4
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30150">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.20.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name: "Martin"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field {name: "Stefan"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "Jake"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field {name: "Stefan"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "John"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "Jake"})&#8592;[:KNOWS]-(:Person:Product {name: "Alicia"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "John"})-[:KNOWS]&#8594;(:Person:Sales {name: "Rik"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The <code class="literal">minLevel</code> and <code class="literal">maxLevel</code> values refer to the number of relationships in the path.
                  Using a <code class="literal">minLevel</code> of 1 means that paths one hop from Joe with the <code class="literal">FOLLOWS</code> relationship type will be returned.
                  If we want to ensure that the relationship type sequence defined in this <code class="literal">relationshipFilter</code> is matched at least once, we need to use a <code class="literal">minLevel</code> of <code class="literal">2</code> since there are two relationship types in the filter.
               </p>
               <p><span class="formalpara-title">The following returns the paths of 2 to 4 hops from Joe where the relationship types alternate between <code class="literal">FOLLOWS</code> and <code class="literal">KNOWS</code>.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Joe"})
CALL apoc.path.expandConfig(p, {
	relationshipFilter: "FOLLOWS&gt;,KNOWS",
	beginSequenceAtStart: true,
	minLevel: 2,
	maxLevel: 4
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30311">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.21.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name: "Martin"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field {name: "Stefan"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:KNOWS]&#8594;(:Person:Product {name: "Jake"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "Jake"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field {name: "Stefan"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "John"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:DevRel {name: "Lju"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "Jake"})&#8592;[:KNOWS]-(:Person:Product {name: "Alicia"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product
                                 {name: "John"})-[:KNOWS]&#8594;(:Person:Sales {name: "Rik"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>This config can also be used in combination with <code class="literal">beginSequenceAtStart: false</code>, which means that the sequence will start one hop away from the starting node.
                  If we use this config, it means that the first relationship type defined in <code class="literal">relationshipFilter</code> will only apply to the starting node.
               </p>
               <p><span class="formalpara-title">The following returns the paths of 3 to 5 hops from Jake where the relationship types alternate between <code class="literal">FOLLOWS</code> and <code class="literal">KNOWS</code>, after first following <code class="literal">KNOWS</code> relationships from Jake.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Jake"})
CALL apoc.path.expandConfig(p, {
	relationshipFilter: "KNOWS,FOLLOWS&gt;,KNOWS",
	beginSequenceAtStart: false,
	minLevel: 3,
	maxLevel: 7
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30440">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.22.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Stefan"})&#8592;[:KNOWS]-(:Person:Engineering
                                 {name: "Zhen"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales
                                 {name: "Anthony"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Stefan"})&#8592;[:KNOWS]-(:Person:Engineering
                                 {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product {name: "John"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:Product {name: "Alicia"})-[:FOLLOWS]&#8594;(:Person:Sales {name: "Jonny"})-[:KNOWS]&#8594;(:Person:Sales
                                 {name: "Anthony"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Product {name: "Jake"})&#8592;[:KNOWS]-(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Stefan"})&#8592;[:KNOWS]-(:Person:Engineering
                                 {name: "Zhen"})-[:FOLLOWS]&#8594;(:Person:Product {name: "John"})-[:KNOWS]&#8594;(:Person:Sales {name: "Rik"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>5</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </section>
            <section class="section" id="path-expander-paths-config-examples-sequence-node-labels">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title"><a class="anchor" href="#path-expander-paths-config-examples-sequence-node-labels"></a>12.3.4.7.&nbsp;Sequences of node labels
                        </h4>
                     </div>
                  </div>
               </div>
               <p>Sequences of node labels can be specified by comma separating values passed to <code class="literal">labelFilter</code>.
                  This is usually used in combination with <code class="literal">beginSequenceAtStart: false</code>, which means that sequences will start one hop away from the starting node.
               </p>
               <p>For example, if we start from the Praveena node and want to return the paths that contain alternating <code class="literal">Field</code> and <code class="literal">DevRel</code> nodes, we can specify a label filter of <code class="literal">"+Field,+DevRel"</code>.
               </p>
               <p><span class="formalpara-title">The following returns the paths of 1 to 4 hops from Praveena where the nodes alternate between having the <code class="literal">Field</code> and <code class="literal">DevRel</code> labels.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expandConfig(p, {
	labelFilter: "+Field,+DevRel",
	beginSequenceAtStart: false,
	minLevel: 1,
	maxLevel: 4
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30524">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.23.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>1</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The <code class="literal">minLevel</code> and <code class="literal">maxLevel</code> values refer to the number of relationships in the path.
                  Using a <code class="literal">minLevel</code> of 1 means that paths where the node one hop from Praveena has the <code class="literal">Field</code> label will be returned.
                  If we want to ensure that the label sequence defined in this <code class="literal">labelFilter</code> is matched at least once, we need to use a <code class="literal">minLevel</code> of <code class="literal">2</code>.
               </p>
               <p><span class="formalpara-title">The following returns the paths of 2 to 4 hops from Praveena where the nodes alternate between having the <code class="literal">Field</code> and <code class="literal">DevRel</code> labels.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expandConfig(p, {
	labelFilter: "+Field,+DevRel",
	beginSequenceAtStart: false,
	minLevel: 2,
	maxLevel: 4
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30616">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.24.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The paths that only contain a relationship from Praveena to Joe have now been filtered out.</p>
               <p>But what if we don&#8217;t want to specify multiple labels exist, but instead want to find paths where a node doesn&#8217;t have a label?
                  To find paths that contain alternating <code class="literal">Field</code> and not <code class="literal">Field</code> nodes, we can specify a label filter of <code class="literal">"+Field,-Field"</code>.
               </p>
               <p><span class="formalpara-title">The following returns the paths of 1 to 4 hops from Praveena where the nodes alternate between having the <code class="literal">Field</code> label and not having the <code class="literal">Field</code> label.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expandConfig(p, {
	labelFilter: "+Field,-Field",
	beginSequenceAtStart: false,
	minLevel: 2,
	maxLevel: 4
})
YIELD path
RETURN path, length(path) AS hops
ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30684">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.25.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">path</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})&#8592;[:FOLLOWS]-(:Person:Sales {name: "Anthony"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})&#8592;[:FOLLOWS]-(:Person:Product {name: "Alicia"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})&#8592;[:FOLLOWS]-(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})&#8592;[:FOLLOWS]-(:Person:Sales {name: "Anthony"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})&#8592;[:FOLLOWS]-(:Person:Product {name: "Alicia"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Praveena"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>3</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})&#8592;[:FOLLOWS]-(:Person:DevRel {name: "Mark"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})&#8592;[:FOLLOWS]-(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:Engineering {name: "Zhen"})-[:KNOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})&#8592;[:FOLLOWS]-(:Person:DevRel {name: "Mark"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>(:Person:Engineering {name: "Praveena"})-[:FOLLOWS]&#8594;(:Person:Field {name: "Joe"})-[:FOLLOWS]&#8594;(:Person:DevRel {name: "Mark"})-[:FOLLOWS]&#8594;(:Person:Field
                                 {name: "Stefan"})&#8592;[:KNOWS]-(:Person:Engineering {name: "Zhen"})
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>We&#8217;ve got a lot more paths, with path lengths between 2 and 4 hops.
                  These paths have the following labels:
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">2 hops - <code class="literal">Field</code> &#8594; Not <code class="literal">Field</code></li>
                     <li class="listitem">3 hops - <code class="literal">Field</code> &#8594; Not <code class="literal">Field</code> &#8594; <code class="literal">Field</code></li>
                     <li class="listitem">4 hops - <code class="literal">Field</code> &#8594; Not <code class="literal">Field</code> &#8594; <code class="literal">Field</code> &#8594; Not <code class="literal">Field</code></li>
                  </ul>
               </div>
               <p>These paths are a bit difficult to read, so we can simplify the output by using the <code class="literal">nodes</code> function to just return the nodes.
                  We&#8217;ll also filter the results so that we only return paths that match the complete <code class="literal">+Field,-Field</code> label filter.
                  We can do this by only returning paths of even length:
               </p>
               <p><span class="formalpara-title">The following returns nodes of paths of 1 to 4 hops from Praveena where the nodes alternate between having the <code class="literal">Field</code> label and not having the <code class="literal">Field</code> label.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expandConfig(p, {
	labelFilter: "+Field,-Field",
	beginSequenceAtStart: false,
	minLevel: 2,
	maxLevel: 4
})
YIELD path
WHERE length(path) % 2 = 0

// Remove the Praveena node from the returned path
RETURN nodes(path)[1..] AS nodes, length(path) AS hops

ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e30881">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.26.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Sales {name: "Anthony"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Engineering {name: "Zhen"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Product {name: "Alicia"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Engineering {name: "Praveena"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Sales {name: "Anthony"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Engineering {name: "Zhen"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Product {name: "Alicia"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Engineering {name: "Praveena"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Engineering {name: "Zhen"}), (:Person:Field {name: "Stefan"}), (:Person:DevRel {name:
                                 "Mark"})]
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"}), (:Person:Field {name: "Stefan"}), (:Person:Engineering {name:
                                 "Zhen"})]
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:Engineering {name: "Zhen"}), (:Person:Field {name: "Stefan"}), (:Person:DevRel {name:
                                 "Mark"})]
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"}), (:Person:Field {name: "Stefan"}), (:Person:Engineering {name:
                                 "Zhen"})]
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <p>The <code class="literal">*</code> character can be used as a wildcard in a node sequence to indicate that any label can appear in that position.
                  If we want to match a sequence of nodes with any label followed by one with the <code class="literal">DevRel</code> label, we can specify the label filter <code class="literal">*,+DevRel</code></p>
               <p><span class="formalpara-title">The following returns nodes of paths of 2 to 4 hops from Praveena where the nodes alternate between having any label and the
                     <code class="literal">DevRel</code> label.&nbsp;</span>
                  
               </p><pre class="programlisting highlight"><code data-lang="cypher">MATCH (p:Person {name: "Praveena"})
CALL apoc.path.expandConfig(p, {
	labelFilter: "*,+DevRel",
	beginSequenceAtStart: false,
	minLevel: 2,
	maxLevel: 4
})
YIELD path
WHERE length(path) % 2 = 0

// Remove the Praveena node from the returned path
RETURN nodes(path)[1..] AS nodes, length(path) AS hops

ORDER BY hops;</code></pre><p>
                  
               </p>
               <div class="table" id="d0e31013">
                  <table class="table" summary="Results" border="1">
                     <caption class="table-title">Table&nbsp;12.27.&nbsp;Results</caption>
                     <colgroup>
                        <col class="col_1"></col>
                        <col class="col_2"></col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th style="text-align: left; vertical-align: top; ">nodes</th>
                           <th style="text-align: left; vertical-align: top; ">hops</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Engineering {name: "Zhen"}), (:Person:DevRel {name: "Lju"})]</p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>2</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"}), (:Person:Product {name: "Jake"}), (:Person:DevRel {name:
                                 "Lju"})]
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Field {name: "Joe"}), (:Person:DevRel {name: "Mark"}), (:Person:Product {name: "Jake"}), (:Person:DevRel {name:
                                 "Lju"})]
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                        <tr>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>[(:Person:Engineering {name: "Zhen"}), (:Person:DevRel {name: "Lju"}), (:Person:Product {name: "Jake"}), (:Person:DevRel {name:
                                 "Mark"})]
                              </p>
                           </td>
                           <td style="text-align: left; vertical-align: top; ">
                              <p>4</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </section>
         </section>
      </section>
      <footer><script type="text/javascript">
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          //Allow Linker
          ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
          ga('send', 'pageview');
          // Load the plugin.
          ga('require', 'linker');
          // Define which domains to autoLink.
          ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
        </script><script type="text/javascript">
          (function() {
          var didInit = false;
          function initMunchkin() {
            if(didInit === false) {
              didInit = true;
              Munchkin.init('710-RRC-335');
            }
          }
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.async = true;
          s.src = '//munchkin.marketo.net/munchkin.js';
          s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
              initMunchkin();
            }
          };
          s.onload = initMunchkin;
          document.getElementsByTagName('head')[0].appendChild(s);
          })();
        </script></footer>
   </body>
</html>